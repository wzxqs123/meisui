<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>型男改造</title>
        <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
        <meta name="format-detection" content="telephone=no">
        <link rel="stylesheet" type="text/css" href="css/index.css">
        <link rel="stylesheet" type="text/css" href="css/swiper.3.1.7.min.css">
        <style type="text/css">
            html, body {
                background-color: #fff;
            }
        </style>
    </head>
    <body>
        <header class="man-r-head">
            <img class="block" src="images/demoimages/pic132.jpg" alt="" />
        </header>
        <form class="man-r-sec" action="">
            <div class="man-r-title text-center">
                <h2>必填项目</h2>
                <span class="block">REQUIRED ITEMS</span>
            </div>
            <div class="man-r-ages man-r-scales">
                <div class="man-r-scaleshead position-rel">
                    <span class="man-r-twentysix position-abs">年龄*</span>
                    <em class="man-r-ageshow man-r-scalesshow block text-center man-r-twentysix"><em>15</em></em>
                    <strong class="position-abs">滑动标尺选择年龄</strong>
                </div>
                <div class="swiper-containerA man-r-agecon man-r-scalescon">
                    <div class="swiper-wrapper position-rel">
                        
                    </div>
            
                    <div class="man-r-pointer position-abs"></div>
                </div>
            </div>
            <div class="man-r-heights man-r-scales">
                <div class="man-r-scaleshead position-rel">
                    <span class="man-r-twentysix position-abs">身高*</span>
                    <em class="man-r-heightshow man-r-scalesshow block text-center man-r-twentysix"><em>150</em>厘米</em>
                    <strong class="position-abs">滑动标尺选择年龄</strong>
                </div>
                <div class="swiper-containerH man-r-heightcon man-r-scalescon position-rel">
                    <div class="swiper-wrapper">
                        
                    </div>

                    <div class="man-r-pointer position-abs"></div>
                </div>
            </div>
            <div class="man-r-weights man-r-scales">
                <div class="man-r-scaleshead position-rel">
                    <span class="man-r-twentysix position-abs">体重*</span>
                    <em class="man-r-weightshow man-r-scalesshow block text-center man-r-twentysix"><em>40</em>公斤</em>
                    <strong class="position-abs">滑动标尺选择年龄</strong>
                </div>
                <div class="swiper-containerW man-r-weightcon man-r-scalescon position-rel">
                    <div class="swiper-wrapper">
                        
                    </div>

                    <div class="man-r-pointer position-abs"></div>
                </div>
            </div>

            <div class="man-r-type">
                <p class="man-r-typecon man-r-twentysix">选择肤色和体型*</p>
                <div class="clearfix">
                    <div class="man-r-skin left">
                        <span>选择肤色</span>
                    </div>
                    <div class="man-r-weight left">
                        <span>选择体型</span>
                    </div>
                </div>
            </div>
            <div class="man-r-addimg">
                <p class="man-r-addimgcon man-r-twentysix">添加照片*</p>
                <div class="clearfix">
                    <div class="man-r-andy left position-rel">
                        <input class="position-abs" type="file" />
                        <!-- 如果要隐藏此行文字span标签添加none类名 -->
                        <span class="block text-center">添加一张<em class="man-r-orange">正脸照</em></span>
                        <!-- 显示图片去除none -->
                        <img class="position-abs none" src="" alt="" />
                    </div>
                    <div class="man-r-general left position-rel">
                        <input class="position-abs" type="file" />
                        <!-- 如果要隐藏此行文字span标签添加none类名 -->
                        <span class="block text-center">添加一张<em class="man-r-orange">全身照</em></span>
                        <!-- 显示图片去除none -->
                        <img class="position-abs none" src="" alt="" />
                    </div>
                </div>
            </div>
            <div class="man-r-style">
                <p class="man-r-stylecon man-r-twentysix">喜欢的穿衣风格*</p>
                <div class="man-r-com text-center clearfix">
                    <span class="left">简约休闲</span>
                    <span class="left">街头嘻哈</span>
                    <span class="left">性感熟男</span>
                    <span class="left">运动潮流</span>
                    <span class="left">时尚商务</span>
                    <span class="left">随&nbsp&nbsp&nbsp&nbsp意</span>
                </div>
            </div>
            <div class="man-r-call">
                <p class="man-r-twentysix">联系方式*</p>
                <div class="man-r-callcom">
                    <input class="man-r-number block man-r-twentysix" type="text" placeholder="微信号或手机号" />
                </div>
            </div>
            <div class="man-r-demand">
                <p class="man-r-twentysix">改造需求*</p>
                <div class="man-r-text">
                    <textarea class="man-r-clothes man-r-twentysix block" placeholder="您喜欢的穿衣风格、想要的造型特点，尽情告诉我们把!"></textarea>
                </div>
            </div>
            <div class="man-r-title text-center">
                <h2>选填项目</h2>
                <span class="block">OPTIONAL ITEMSi</span>
            </div>
            <div class="man-r-occupa">
                <p class="man-r-twentysix">职业</p>
                <div>
                    <input class="man-r-twentysix block" type="text" placeholder="方便根据职业性质为您推荐服饰" />
                </div>
            </div>
            <div class="man-r-occasion">
                <p class="man-r-twentysix">出席场合</p>
                <div>
                    <input class="man-r-twentysix block" />
                </div>
            </div>
            <div class="man-r-effect">
                <p class="man-r-twentysix">期待效果</p>
                <div class="man-r-text">
                    <textarea class="man-r-twentysix block" placeholder="您喜欢的穿衣风格、想要的改造的样子，都可以填写下来"></textarea>
                </div>
            </div>
            <h3 class="man-r-careful man-r-orange">*选填项目如果填完整可以让改造更加贴近您的需求，亲尽量填写一下哦！</h3>
            <div class="man-r-prompt">
                <span class="man-r-twentysix block">小提示</span>
                <p>由于改造用户较多，我们一般会在3-5个工作日给您呈上改造方案。加入搭配会员，独享搭配衣服免费邮寄试穿，不满意7天内无理由退换货（无需支付运费）！如有疑问请联系在线客服。</p>
            </div>
            <button class="man-r-button block white-color text-center" type="button">提交</button>
        </form>
        <!-- 选择肤色 -->
        <div class="man-r-skinbg man-r-bg none">
            <div class="man-r-choiceskin position-abs">
                <div class="man-r-skinhead text-center position-rel">
                    <span>选择肤色</span>
                    <i class="man-r-close position-abs"></i>
                </div>
                <div class="man-r-skincon clearfix">
                    <div class="man-r-skinoption left position-rel">
                        <img class="block" src="images/demoimages/pic133.png" alt="" />
                        <em class="block text-center">肤色偏白</em>
                        <span class="man-r-skinsel position-abs none"></span>
                    </div>
                    <div class="man-r-skinoption left position-rel">
                        <img class="block" src="images/demoimages/pic134.png" alt="" />
                        <em class="block text-center">肤色偏红</em>
                        <span class="man-r-skinsel position-abs none"></span>
                    </div>
                    <div class="man-r-skinoption left position-rel">
                        <img class="block" src="images/demoimages/pic135.png" alt="" />
                        <em class="block text-center">肤色偏黄</em>
                        <span class="man-r-skinsel position-abs none"></span>
                    </div>
                    <div class="man-r-skinoption left position-rel">
                        <img class="block" src="images/demoimages/pic136.png" alt="" />
                        <em class="block text-center">肤色偏黑</em>
                        <span class="man-r-skinsel position-abs none"></span>
                    </div>
                    <p class="man-r-figure left text-center">点击人物选择</p>
                </div>
            </div>
        </div>
        <div class="man-r-shapebg man-r-bg none">
            <div class="man-r-choiceshape position-abs">
                <div class="man-r-shapehead text-center position-rel">
                    <span>选择身形</span>
                    <i class="man-r-close position-abs"></i>
                </div>
                <div class="man-r-shapecon clearfix">
                    <div class="man-r-shapeoption left position-rel">
                        <img class="block" src="images/demoimages/pic137.png" alt="" />
                        <em class="block text-center">完美体型</em>
                        <span class="man-r-shapesel position-abs none"></span>
                    </div>
                    <div class="man-r-shapeoption left position-rel">
                        <img class="block" src="images/demoimages/pic138.png" alt="" />
                        <em class="block text-center">正常体型</em>
                        <span class="man-r-shapesel position-abs none"></span>
                    </div>
                    <div class="man-r-shapeoption left position-rel">
                        <img class="block" src="images/demoimages/pic139.png" alt="" />
                        <em class="block text-center">瘦矮体型</em>
                        <span class="man-r-shapesel position-abs none"></span>
                    </div>
                    <div class="man-r-shapeoption left position-rel">
                        <img class="block" src="images/demoimages/pic140.png" alt="" />
                        <em class="block text-center">瘦高体型</em>
                        <span class="man-r-shapesel position-abs none"></span>
                    </div>
                    <div class="man-r-shapeoption left position-rel">
                        <img class="block" src="images/demoimages/pic141.png" alt="" />
                        <em class="block text-center">胖矮体型</em>
                        <span class="man-r-shapesel position-abs none"></span>
                    </div>
                    <div class="man-r-shapeoption left position-rel">
                        <img class="block" src="images/demoimages/pic142.png" alt="" />
                        <em class="block text-center">胖高体型</em>
                        <span class="man-r-shapesel position-abs none"></span>
                    </div>
                    <p class="man-r-figure left text-center">点击人物选择</p>
                </div>
            </div>
        </div>
        <!-- 提示弹窗 -->
        <div class="man-r-error white-color text-center none"></div>
        <script src="js/jquery-1.11.3.min.js" type="text/javascript"></script>
        <script src="js/swiper.3.1.7.jquery.min.js" type="text/javascript"></script>
        <script src="js/index.js" type="text/javascript"></script>
        <script type="text/javascript">
            function addType (con, item, start, end) {
                for (var i = start; i <= end; i++) {
                    $(con).children(".swiper-wrapper").append("<div class='swiper-slide " + item + " man-r-scalesitem text-center position-rel'><span class='position-abs'></span><em class='man-r-twentysix block none'>" + i + "</em></div>");
                };
            }
            addType(".man-r-agecon", "man-r-ageitem", 15, 50); //年龄15-50
            addType(".man-r-heightcon", "man-r-heightitem", 150, 210); //身高150-210厘米
            addType(".man-r-weightcon", "man-r-weightitem", 40, 120); //身高40-120公斤
            // 选年龄
            var mySwipers = new Swiper ('.swiper-containerA', {
                direction: 'horizontal',
                loop: false,
                centeredSlides : true,
                freeMode : false,
                slidesPerView : "auto",
                onSlideChangeEnd: function(swiper){
                    var changeEndNum = $(".man-r-ageitem").eq(swiper.activeIndex).children("em").html();
                    $(".man-r-ageshow em").html(changeEndNum);
                }
            })
            // 选身高
            var mySwipers = new Swiper ('.swiper-containerH', {
                direction: 'horizontal',
                loop: false,
                centeredSlides : true,
                freeMode : false,
                slidesPerView : "auto",
                onSlideChangeEnd: function(swiper){
                    var changeEndNum = $(".man-r-heightitem").eq(swiper.activeIndex).children("em").html();
                    $(".man-r-heightshow em").html(changeEndNum);
                }
            })
            // 选体重
            var mySwipers = new Swiper ('.swiper-containerW', {
                direction: 'horizontal',
                loop: false,
                centeredSlides : true,
                freeMode : false,
                slidesPerView : "auto",
                onSlideChangeEnd: function(swiper){
                    var changeEndNum = $(".man-r-weightitem").eq(swiper.activeIndex).children("em").html();
                    $(".man-r-weightshow em").html(changeEndNum);
                }
            })

            // 遍历刻度表逢5的倍数特殊处理（显示数字，刻度变长）
            $(".man-r-scalesitem em").each(function(i) {
                var itemNum = parseInt($(this).html());
                if (itemNum % 5 == 0) {
                    $(this).removeClass("none");
                    $(this).siblings("span").css({
                        "height" : "1rem"
                    });
                }
            });

            // 穿衣风格第三个选项的样式右边距删除修改
            var spanSize = $(".man-r-com span").size();
            $(".man-r-com span").each(function(i) {
                i++;
                if (i % 3 == 0) {
                    $(this).css({
                        "margin-right" : "0"
                    });
                }
            });

            var uploadFocus = [0, 0, 0, 0, 0, 0, 0],
                uploadBools = true; //肤色，体型，正脸照，全身照，穿衣风格，联系方式，改造需求

            // 喜欢的穿衣风格点击被选项变橙色
            $(".man-r-com").on('click', 'span', function() {
                var classBoolean = $(this).hasClass("man-r-spansel");
                if (classBoolean) {
                    $(this).removeClass("man-r-spansel");
                } else {
                    $(this).addClass("man-r-spansel");
                }
            });

            function choiceType (typeEve, typebg) {
                typeEve.click(function() {
                    typebg.removeClass("none");
                    lockscroll(); //锁定滚动条
                });
            }
            choiceType($(".man-r-skin"), $(".man-r-skinbg")); //肤色
            choiceType($(".man-r-weight"), $(".man-r-shapebg")); //体型

            function choiceOption (conEve, option, selEve, typebg, typechild, success, num) {
                $(conEve).on('click', option, function() {
                    $(this).children(selEve).removeClass("none");
                    $(this).siblings(option).children(selEve).addClass("none");
                    var optionName = $(this).children("em").html();
                    $(typebg).addClass("none");
                    $(typechild).html(optionName).addClass(success);
                    relievescroll() //解除锁定的滚动条
                    uploadFocus[num] = 1;
                });
            }
            choiceOption(".man-r-skincon", '.man-r-skinoption', ".man-r-skinsel", ".man-r-skinbg", ".man-r-skin span", "skintrue", 0); //肤色
            choiceOption(".man-r-shapecon", '.man-r-shapeoption', ".man-r-shapesel", ".man-r-shapebg", ".man-r-weight span", "shapetrue", 1); //体型

            // 点击空白部分弹窗
            freeBlank(".man-r-skinbg", ".man-r-choiceskin", "none"); //肤色
            freeBlank(".man-r-shapebg", ".man-r-choiceshape", "none");  //体型

            // 点击提交
            $(".man-r-button").click(function(e) {
                // 穿衣风格是否有进行选择的判断
                var spanselSize = $(".man-r-spansel").size();
                if (spanselSize > 0) {
                    uploadFocus[4] = 1;
                } else if (spanselSize == 0) {
                    uploadFocus[4] = 0;
                }

                // 图片是否上传
                function choiceImg (imgEve, num) {
                    if ($(imgEve).attr("src") == "") {
                        uploadFocus[num] = 0;
                    } else {
                        uploadFocus[num] = 1;
                    }
                }
                choiceImg(".man-r-andy img", 2);
                choiceImg(".man-r-general img", 3);

                function obtainInput (inputEve, num) {
                    $(inputEve).blur();
                    var obtainCon = $(inputEve).val();
                    if (obtainCon == "") {
                        uploadFocus[num] = 0;
                    } else {
                        uploadFocus[num] = 1;
                    }
                }
                obtainInput(".man-r-number", 5);
                obtainInput(".man-r-clothes", 6);
                
                // 阻止表单提交的默认事件
                e.preventDefault();

                if (uploadBools) {
                    var uploadNum = 0,
                        errorNumber = 7;
                    for (var i = 0; i < uploadFocus.length; i++) {
                        uploadNum += uploadFocus[i];
                        if (uploadFocus[i] == 0 && errorNumber >= i) {
                            errorNumber = i;
                        }
                    };
                    if (uploadNum == uploadFocus.length) {
                        console.log("这里传数据");
                        uploadBools = false;
                    } else {
                        if (errorNumber == 0) {
                            $(".man-r-error").html("请选择肤色")
                        } else if (errorNumber == 1) {
                            $(".man-r-error").html("请选择体型")
                        } else if(errorNumber == 2) {
                            $(".man-r-error").html("请上传正脸照")
                        } else if(errorNumber == 3) {
                            $(".man-r-error").html("请上传全身照")
                        } else if(errorNumber == 4) {
                            $(".man-r-error").html("请选择你喜欢的穿衣风格")
                        } else if(errorNumber == 5) {
                            $(".man-r-error").html("请留下你的联系方式")
                        } else if(errorNumber == 6) {
                            $(".man-r-error").html("请填写你的改造需求")
                        }
                        $(".man-r-error").fadeIn(500, function() {
                            $(this).fadeOut(2500);
                        });
                        uploadBools = true;
                    }
                }
            });
        </script>
    </body>
</html>