<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>获奖记录</title>
        <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
        <meta name="format-detection" content="telephone=no">
        <link rel="stylesheet" type="text/css" href="css/activitys.css">
        <style type="text/css">
            html, body {
                background: #fff;
            }
            /*12-20新增*/
            .snow-canvas {
                z-index: 5;
                display: block;
                width: 100%;
                height: 100%;
                top: 0;
                left: 0;
                position: fixed;
                pointer-events: none;
            }
            *{
                -webkit-touch-callout:none;  /*系统默认菜单被禁用*/
                -webkit-user-select:none; /*webkit浏览器*/
                -khtml-user-select:none; /*早期浏览器*/
                -moz-user-select:none; /*火狐*/
                -ms-user-select:none;  /*IE10*/
                user-select:none;
            }
            input{
                -webkit-user-select: auto;
            }
        </style>
    </head>
    <body>
        <div class="chri-m-wrap position-rel">
            <!-- 下雪 12-20新增 -->
            <canvas class="snow-canvas" speed="1" interaction="false" size="2" count="80" opacity="0.00001" start-color="rgba(253,252,251,1)" end-color="rgba(251,252,253,0.3)" wind-power="0" image="false" width="1366" height="667"></canvas>
            <canvas class="snow-canvas" speed="3" interaction="true" size="6" count="30" start-color="rgba(253,252,251,1)" end-color="rgba(251,252,253,0.3)" opacity="0.00001" wind-power="2" image="false" width="1366" height="667"></canvas>
            <canvas class="snow-canvas" speed="3" interaction="true" size="12" count="20" wind-power="-5" image="images/snow.png" width="1366" height="667"></canvas>
            <!-- 音乐 -->
            <!-- 无音乐时添加chri-n-nomusic -->
            <div class="chri-n-micon chri-n-nomusic position-abs">
                <audio id="chri-n-audio" src="" loop="loop" autoplay="autoplay"></audio>
            </div>
            <a href="javascript:history.go(-1)" class="chri-m-return white position-abs"><i class="position-abs"></i>返回</a>
            <div class="chri-m-top">
                <div class="chri-n-tophead twenty-four weight-bold christmas-red clearfix text-center">
                    <span class="left">序号</span>
                    <span class="left">奖品</span>
                </div>
                <div id="chri-n-toplists" class="chri-n-toplists bg-white christmas-red">
                    <ol id="chri-n-topol" class="chri-n-topol">
                        <li class="chri-m-topoption chri-n-topoption clearfix text-center">
                            <span class="left">1</span>
                            <span class="left">爱情火箭</span>
                        </li>
                        <li class="chri-m-topoption chri-n-topoption clearfix text-center">
                            <span class="left">12</span>
                            <span class="left">5000经验</span>
                        </li>
                        <li class="chri-m-topoption chri-n-topoption clearfix text-center">
                            <span class="left">123</span>
                            <span class="left">5000经验</span>
                        </li>
                        <li class="chri-m-topoption chri-n-topoption clearfix text-center">
                            <span class="left">1234</span>
                            <span class="left">5000经验</span>
                        </li>
                        <li class="chri-m-topoption chri-n-topoption clearfix text-center">
                            <span class="left">12345</span>
                            <span class="left">5000经验</span>
                        </li>
                        <li class="chri-m-topoption chri-n-topoption clearfix text-center">
                            <span class="left">123456</span>
                            <span class="left">5000经验</span>
                        </li>
                    </ol>
                </div>
            </div>
            <form action="" class="chri-m-infobg">
                <div class="chri-m-address new-y-red clearfix">
                    <span class="weight-bold twenty-four left">填写收货地址</span>
                    <em class="left">（获得实物奖品情况下填写）</em>
                </div>
                <ul class="chri-m-lists newyear-r-lists bg-white thirty new-y-red">
                    <li class="clearfix">
                        <label class="left position-rel" for=""><i class="text-center position-abs">*</i>美岁ID：</label>
                        <input class="newyear-r-txid left" type="number" placeholder="请输入天香ID（必填）" value="123456" readonly />
                    </li>
                    <li class="chri-m-yellowbg clearfix">
                        <label class="left position-rel" for=""><i class="text-center position-abs">*</i>详细地址：</label>
                        <input class="newyear-r-sxaddress chri-m-yellowbg left" type="text" placeholder="请输入收货地址（必填）" />
                    </li>
                    <li class="clearfix">
                        <label class="left position-rel" for=""><i class="text-center position-abs">*</i>联系人：</label>
                        <input class="newyear-r-people left" type="text" placeholder="请输入收件人姓名（必填）" />
                    </li>
                    <li class="chri-m-yellowbg clearfix">
                        <label class="left position-rel" for=""><i class="text-center position-abs">*</i>联系电话：</label>
                        <input class="newyear-r-iphone chri-m-yellowbg left" type="number" placeholder="请输入手机号（必填）" />
                    </li>
                    <li class="clearfix">
                        <label class="left" for="">微信：</label>
                        <input class="left" type="text" />
                    </li>
                    <li class="chri-m-yellowbg clearfix">
                        <label class="left" for="">QQ：</label>
                        <input class="chri-m-yellowbg left" type="number" />
                    </li>
                    <li class="clearfix">
                        <label class="left" for="">备注：</label>
                        <input class="left" type="text" />
                    </li>
                </ul>
                <div class="chri-m-footbut clearfix">
                    <span class="chri-m-reset white text-center left">重置</span>
                    <button type="button" class="chri-m-sib white text-center left">提交</button>
                </div>
            </form>
            <!-- 渐隐提示弹窗 -->
            <div class="chri-n-error white thirty text-center position-fix none"></div>
        </div>
        <script src="js/jquery-1.11.3.min.js" type="text/javascript"></script>
        <script src="js/index.js" type="text/javascript"></script>
        <!-- 12-20新增 -->
        <script src="js/snow-plugin.js" type="text/javascript"></script>
        <script>
            // 下雪 12-20新增
            $(function(){
                $(".snow-canvas").snow();
            });

            // li背景色交替出现
            function blockPink (liEve, pinkBg) {
                $(liEve).each(function (i) {
                    if (i % 2 == 0) {
                        $(this).addClass(pinkBg);
                    }
                });
            }
            blockPink(".chri-n-topol li", "chri-n-rewardpink");

            // 获奖公告滚屏
            topscroll("chri-n-toplists", "#chri-n-toplists", "#chri-n-topol", 1, 50);
            function topscroll (idEve, outerlayer, inlayer, speed, intervaltime) {
                // top魅力值模块滚动
                var luckMain = document.getElementById(idEve);
                var luckSpeed = speed;
                var luckScroll = setInterval(function (){
                    if (luckMain.scrollTop + $(outerlayer).height() >= $(inlayer).height()) {
                        clearInterval(luckScroll);
                        setTimeout(function () {
                            luckMain.scrollTop += luckSpeed;
                            // 滚动到底部时重新滚动
                            luckMain.scrollTop = 0;
                            topscroll("chri-n-toplists", "#chri-n-toplists", "#chri-n-topol", 1, 50);
                        }, 1500)
                    } else if(luckMain.scrollTop + $(outerlayer).height() < $(inlayer).height() && luckMain.scrollTop == 0) {
                        clearInterval(luckScroll);
                        setTimeout(function () {
                            luckMain.scrollTop += luckSpeed;
                            topscroll("chri-n-toplists", "#chri-n-toplists", "#chri-n-topol", 1, 50);
                        }, 1500)
                    } else {
                        luckMain.scrollTop += luckSpeed;
                    }
                }, intervaltime);
            }

            // 点击取消清除表单所有内容 12-20修改
            $(".chri-m-reset").click(function (e) {
                $(".chri-m-lists li input").each(function (i) {
                    if (i != 0) {
                        $(this).val("");
                    }
                });
            });

            var formFocus = [0, 0, 0];
            var sxaAir = /^[\s]*$/;
            $(".newyear-r-sxaddress").blur(function (e) {
                var sxAddress = $(this).val();
                if (sxaAir.test(sxAddress)) {
                    $(this).val("");
                    $(this).addClass("newyear-r-empty");
                    $(this).attr({
                        "placeholder" : "收货地址不能为空"
                    });
                    formFocus[0] = 0;
                } else {
                    $(this).attr({
                        "placeholder" : "请输入收货地址（必填）"
                    });
                    $(this).removeClass("newyear-r-empty");
                    formFocus[0] = 1;
                }
            });
            $(".newyear-r-people").blur(function (e) {
                var shPeople = $(this).val();
                if (sxaAir.test(shPeople)) {
                    $(this).val("");
                    $(this).addClass("newyear-r-empty");
                    $(this).attr({
                        "placeholder" : "联系人不能为空"
                    });
                    formFocus[1] = 0;
                } else {
                    $(this).attr({
                        "placeholder" : "请输入收件人姓名（必填）"
                    });
                    $(this).removeClass("newyear-r-empty");
                    formFocus[1] = 1;
                }
            });
            $(".newyear-r-iphone").blur(function (e) {
                var shIphone = $(this).val();
                if (phoneReg.test(shIphone)) {
                    $(this).attr({
                        "placeholder" : "请输入手机号（必填）"
                    });
                    $(this).removeClass("newyear-r-empty");
                    formFocus[2] = 1;
                } else {
                    $(this).val("");
                    $(this).addClass("newyear-r-empty");
                    $(this).attr({
                        "placeholder" : "请输入正确的手机号"
                    });
                    formFocus[2] = 0;
                }
            });
            // 点击提交
            $(".chri-m-sib").click(function (e) {
                $(".newyear-r-txid").blur();
                $(".newyear-r-sxaddress").blur();
                $(".newyear-r-people").blur();
                $(".newyear-r-iphone").blur();
                // 阻止表单提交的默认事件
                e.preventDefault();
                var formSum = 0;
                for (var i = 0; i < formFocus.length; i++) {
                    formSum += formFocus[i];
                };
                if (formSum == formFocus.length) {
                    $(".chri-n-error").html("提交成功");
                    $(".chri-n-error").fadeIn(300, function () {
                        // 复制成功提示淡出
                        $(this).fadeOut(2500);
                    })
                } else {
                    // 错误提示
                    $(".chri-n-error").html("请完善资料后提交");
                    $(".chri-n-error").fadeIn(300, function () {
                        // 复制成功提示淡出
                        $(this).fadeOut(2500);
                    })
                }
            });

            // 12-20新增
            // 音乐
            $(function() {
                getSong();
                clicks();
            })

            //获取歌曲链接并插入dom中
            function getSong() { 
                var audio = document.getElementById("chri-n-audio");
                audio.src = "media/jinglebells.m4a";
                audio.loop = true; // 歌曲循环
                audio.pause();
            }
            //点击播放/暂停
            function clicks() {
                var audio = document.getElementById("chri-n-audio");
                $(".chri-n-micon").click(function() {
                    if ($(".chri-n-micon").hasClass("chri-n-nomusic")) {
                        $(".chri-n-micon").removeClass("chri-n-nomusic");
                        audio.play(); // 开始播放
                    } else {
                        $(".chri-n-micon").addClass("chri-n-nomusic");
                        audio.pause(); // 暂停播放
                    }
                })
            }
        </script>
    </body>
</html>