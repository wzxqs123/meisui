<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>十二星宫</title>
        <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
        <meta name="format-detection" content="telephone=no">
        <link rel="stylesheet" type="text/css" href="css/activitys.css">
        <style type="text/css">
            html, body {
                width: 100%;
                background: #00062f;
            }
            @font-face {
                font-family: "hyxjtj";
                src: url("font/hyxjtj/hyxjtj.eot"); /* IE9 */
                src: url("font/hyxjtj/hyxjtj.eot?#iefix") format("embedded-opentype"), /* IE6-IE8 */
                
                url("font/hyxjtj/hyxjtj.woff") format("woff"), /* chrome、firefox */
                url("font/hyxjtj/hyxjtj.ttf") format("truetype"), /* chrome、firefox、opera、Safari, Android, iOS 4.2+ */
                
                url("font/hyxjtj/hyxjtj.svg#hyxjtj") format("svg"); /* iOS 4.1- */
                font-style: normal;
                font-weight: normal;
            }
            @font-face {
                font-family: "fzzyjt";
                src: url("font/fzzyjt/fzzyjt.eot"); /* IE9 */
                src: url("font/fzzyjt/fzzyjt.eot?#iefix") format("embedded-opentype"), /* IE6-IE8 */
                
                url("font/fzzyjt/fzzyjt.woff") format("woff"), /* chrome、firefox */
                url("font/fzzyjt/fzzyjt.ttf") format("truetype"), /* chrome、firefox、opera、Safari, Android, iOS 4.2+ */
                
                url("font/fzzyjt/fzzyjt.svg#hyxjtj") format("svg"); /* iOS 4.1- */
                font-style: normal;
                font-weight: normal;
            }
        </style>
    </head>
    <body>
        <div class="csa-act-wrap position-rel">
            <div class="csa-act-headtit">
                <img class="block" src="images/demoimages/pic125.png" alt="" />
            </div>
            <div class="csa-act-time white thirty text-center"></div>
            <div class="csa-act-fittit white text-center"></div>
            <div class="csa-act-planisphere">
                <!-- 本月星座图 -->
                <img class="block" src="images/demoimages/xz-jx.png" alt="" />
            </div>
            <div class="csa-act-throne">
                <div class="csa-act-thronetit white text-center">十二星神位</div>
                <ul class="csa-act-xzlist">
                    <!-- 选中添加csa-act-xzitemsel -->
                    <!-- <li class="csa-act-xzitem csa-act-xzitemsel white text-center">
                        <div class="csa-act-xzpic">
                            <img src="images/demoimages/csa-act-sp.png" alt="" />
                        </div>
                        <div class="csa-act-ancname">虚位以待</div>
                        <span class="csa-act-xzname block">水瓶座</span>
                        <em class="csa-act-xztime block">1.20-2.18</em>
                    </li>
                    <li class="csa-act-xzitem white text-center">
                        <div class="csa-act-xzpic">
                            <img src="images/demoimages/csa-act-sp.png" alt="" />
                        </div>
                        <div class="csa-act-ancname">虚位以待</div>
                        <span class="csa-act-xzname block">水瓶座</span>
                        <em class="csa-act-xztime block">1.20-2.18</em>
                    </li>
                    <li class="csa-act-xzitem white text-center">
                        <div class="csa-act-xzpic">
                            <img src="images/demoimages/csa-act-sp.png" alt="" />
                        </div>
                        <div class="csa-act-ancname">虚位以待</div>
                        <span class="csa-act-xzname block">水瓶座</span>
                        <em class="csa-act-xztime block">1.20-2.18</em>
                    </li>
                    <li class="csa-act-xzitem white text-center">
                        <div class="csa-act-xzpic">
                            <img src="images/demoimages/csa-act-sp.png" alt="" />
                        </div>
                        <div class="csa-act-ancname">虚位以待</div>
                        <span class="csa-act-xzname block">水瓶座</span>
                        <em class="csa-act-xztime block">1.20-2.18</em>
                    </li>
                    <li class="csa-act-xzitem white text-center">
                        <div class="csa-act-xzpic">
                            <img src="images/demoimages/csa-act-sp.png" alt="" />
                        </div>
                        <div class="csa-act-ancname">虚位以待</div>
                        <span class="csa-act-xzname block">水瓶座</span>
                        <em class="csa-act-xztime block">1.20-2.18</em>
                    </li>
                    <li class="csa-act-xzitem white text-center">
                        <div class="csa-act-xzpic">
                            <img src="images/demoimages/csa-act-sp.png" alt="" />
                        </div>
                        <div class="csa-act-ancname">虚位以待</div>
                        <span class="csa-act-xzname block">水瓶座</span>
                        <em class="csa-act-xztime block">1.20-2.18</em>
                    </li>
                    <li class="csa-act-xzitem white text-center">
                        <div class="csa-act-xzpic">
                            <img src="images/demoimages/csa-act-sp.png" alt="" />
                        </div>
                        <div class="csa-act-ancname">虚位以待</div>
                        <span class="csa-act-xzname block">水瓶座</span>
                        <em class="csa-act-xztime block">1.20-2.18</em>
                    </li>
                    <li class="csa-act-xzitem white text-center">
                        <div class="csa-act-xzpic">
                            <img src="images/demoimages/csa-act-sp.png" alt="" />
                        </div>
                        <div class="csa-act-ancname">虚位以待</div>
                        <span class="csa-act-xzname block">水瓶座</span>
                        <em class="csa-act-xztime block">1.20-2.18</em>
                    </li>
                    <li class="csa-act-xzitem white text-center">
                        <div class="csa-act-xzpic">
                            <img src="images/demoimages/csa-act-sp.png" alt="" />
                        </div>
                        <div class="csa-act-ancname">虚位以待</div>
                        <span class="csa-act-xzname block">水瓶座</span>
                        <em class="csa-act-xztime block">1.20-2.18</em>
                    </li>
                    <li class="csa-act-xzitem white text-center">
                        <div class="csa-act-xzpic">
                            <img src="images/demoimages/csa-act-sp.png" alt="" />
                        </div>
                        <div class="csa-act-ancname">虚位以待</div>
                        <span class="csa-act-xzname block">水瓶座</span>
                        <em class="csa-act-xztime block">1.20-2.18</em>
                    </li>
                    <li class="csa-act-xzitem white text-center">
                        <div class="csa-act-xzpic">
                            <img src="images/demoimages/csa-act-sp.png" alt="" />
                        </div>
                        <div class="csa-act-ancname">虚位以待</div>
                        <span class="csa-act-xzname block">水瓶座</span>
                        <em class="csa-act-xztime block">1.20-2.18</em>
                    </li>
                    <li class="csa-act-xzitem white text-center">
                        <div class="csa-act-xzpic">
                            <img src="images/demoimages/csa-act-sp.png" alt="" />
                        </div>
                        <div class="csa-act-ancname">虚位以待</div>
                        <span class="csa-act-xzname block">水瓶座</span>
                        <em class="csa-act-xztime block">1.20-2.18</em>
                    </li> -->
                </ul>
            </div>
            <div class="csa-act-fight">
                <div class="csa-act-fighttit white text-center">神位争夺榜</div>
                <div class="csa-act-fighthead white text-center twenty-four">
                    <span>TOP</span>
                    <span>女神</span>
                    <span>星光值</span>
                </div>
                <div id="csa-act-show" class="csa-act-show">
                    <ul id="csa-act-infolist" class="csa-act-infolist">
                        <!-- <li class="csa-act-infoitem">
                            <span class="csa-act-rank csa-act-rankone weight-bold text-center thirty"><i></i></span>
                            <div class="csa-act-infocon">
                                <img src="images/demoimages/pic48.png" alt="" />
                                <div class="csa-act-infodel">
                                    <span class="block">昵称：娜宝贝</span>
                                    <em class="twenty-four block">ID:59841251</em>
                                </div>
                            </div>
                            <em class="csa-act-starlight twenty-four text-center">8888888</em>
                        </li>
                        <li class="csa-act-infoitem">
                            <span class="csa-act-rank weight-bold text-center thirty">4</span>
                            <div class="csa-act-infocon">
                                <img src="images/demoimages/pic48.png" alt="" />
                                <div class="csa-act-infodel">
                                    <span class="block">昵称：娜宝贝</span>
                                    <em class="twenty-four block">ID:59841251</em>
                                </div>
                            </div>
                            <em class="csa-act-starlight twenty-four text-center">8888888</em>
                        </li> -->
                    </ul>
                </div>
            </div>
            <div class="csa-act-exp">
                <div class="csa-act-expnav white twenty-four">
                    <span class="csa-act-expnavsel">活动奖励</span>
                    <span>活动规则</span>
                </div>
                <!-- 活动奖励 -->
                <div class="csa-act-reward">
                    <div class="csa-act-one white text-center twenty-four">
                        <span class="block">第一名</span>
                        <img class="block" src="images/demoimages/pic126.png" alt="" />
                        <em class="block">豪华礼包</em>
                    </div>
                    <div class="csa-act-two white text-center twenty-four">
                        <span class="block">第二名</span>
                        <img class="block" src="images/demoimages/pic127.png" alt="" />
                        <em class="block">尊享礼包</em>
                    </div>
                    <div class="csa-act-three white text-center twenty-four">
                        <span class="block">第三名</span>
                        <img class="block" src="images/demoimages/pic127.png" alt="" />
                        <em class="block">尊享礼包</em>
                    </div>
                </div>
                <!-- 活动规则 -->
                <ul class="csa-act-rulelist white none">
                    <li class="csa-act-ruleitem">
                        <p>一、活动期内，主播可通过连麦PK积累星光值，最终星光值最高的主播将夺得本月十二星座神位及丰厚奖励</p>
                    </li>
                    <li class="csa-act-ruleitem">
                        <p>二、除第一名外，第二、三名主播也将获得相应奖励，所有奖励将于活动结束3个工作日内发放</p>
                    </li>
                    <li class="csa-act-ruleitem">
                        <p>三、礼包奖励包含</p>
                        <p>豪华礼包：</p>
                        <p>1.1314元现金红包</p>
                        <p>2.美岁2019年终庆典名额</p>
                        <p>3.十二星宫专属海报</p>
                        <p>4.终身守护（可赠送粉丝）</p>
                    </li>
                    <li class="csa-act-ruleitem">
                        <p>尊享礼包：</p>
                        <p>1.888元现金红包</p>
                        <p>2.包季守护（可赠送粉丝）</p>
                    </li>
                    <li class="csa-act-ruleitem">
                        <p>真爱礼包：</p>
                        <p>1.520元现金红包</p>
                        <p>2.包月守护（可赠送粉丝）</p>
                    </li>
                </ul>
            </div>
            <footer class="csa-act-foot white text-center twenty-six">更多详询客服  微信：meisuilive   QQ：965997888<br />本活动最终解释权归美岁直播所有</footer>
            <!-- 弹窗提示 -->
            <div class="csa-act-fadealert text-center white position-fix none"></div>
        </div>
        <script src="js/jquery-1.11.3.min.js" type="text/javascript"></script>
        <script src="js/index.js" type="text/javascript"></script>
        <script>
            

            // tap切换
            $(".csa-act-expnav span").click(function (e) {
                var _this = $(this);
                _this.addClass("csa-act-expnavsel");
                _this.siblings("span").removeClass("csa-act-expnavsel");
                var thisNum = _this.index();
                if (thisNum == 0) {
                    $(".csa-act-reward").removeClass("none");
                    $(".csa-act-rulelist").addClass("none");
                } else {
                    $(".csa-act-rulelist").removeClass("none");
                    $(".csa-act-reward").addClass("none");
                }
            })

            var serverUrl = "http://47.99.95.149:9000/meisuiactivity/constellation/"
            $.ajax({
                url: serverUrl + "/getconstellationtop",
                type: 'post',
                dataType: 'json',
                success: function (data) {
                    console.log(data)
                    var signState = data.sign;
                    if (signState == 1) {
                        var showInfo = data.d;
                        $(".csa-act-time").html(showInfo.s_time + '-' + showInfo.e_time); // 日期：开始——结束
                        $(".csa-act-fittit").html(showInfo.constellationname + '神位争夺战开战！') // 标题

                        var uploadUrl = showInfo.uploadUrl; // 图片前缀路径
                        var rankThreeName = ["csa-act-rankone", "csa-act-ranktwo", "csa-act-rankthree"];
                        var anchorInfo = ""; // 排行榜列表信息
                        for (var i = 0; i < showInfo.list.length; i++) {
                            if (i < 3) {
                                anchorInfo += '<li class="csa-act-infoitem"><span class="csa-act-rank ' + rankThreeName[i] + ' weight-bold text-center thirty"><i></i></span><div class="csa-act-infocon"><img src="' + (uploadUrl + showInfo.list[i].head) + '" alt="" /><div class="csa-act-infodel"><span class="block">昵称：' + showInfo.list[i].nickname + '</span><em class="twenty-four block">ID:' + showInfo.list[i].f_uuid + '</em></div></div><em class="csa-act-starlight twenty-four text-center">' + showInfo.list[i].starlight + '</em></li>'
                            } else {
                                anchorInfo += '<li class="csa-act-infoitem"><span class="csa-act-rank weight-bold text-center thirty">' + (i + 1) + '</span><div class="csa-act-infocon"><img src="' + (uploadUrl + showInfo.list[i].head) + '" alt="" /><div class="csa-act-infodel"><span class="block">昵称：' + showInfo.list[i].nickname + '</span><em class="twenty-four block">ID:' + showInfo.list[i].f_uuid + '</em></div></div><em class="csa-act-starlight twenty-four text-center">' + showInfo.list[i].starlight + '</em></li>'
                            }
                        };
                        $(".csa-act-infolist").empty("");
                        $(".csa-act-infolist").append(anchorInfo); // 添加排行榜主播列表信息
                        $(".csa-act-planisphere img").attr({ // 头部当月星座大图
                            "src": uploadUrl + showInfo.pic
                        });
                    } else if (signState == 0) {
                        erroralt(); // 系统忙弹窗
                    }
                }
            })
            // 十二星座展示
            $.ajax({
                url: serverUrl + "/getconstellationlist",
                type: 'post',
                dataType: 'json',
                success: function (data) {
                    console.log(data)
                    var signState = data.sign;
                    if (signState == 1) {
                        var showInfo = data.d;
                        var uploadUrl = showInfo.uploadUrl; // 图片前缀路径
                        var defaultPic = {
                            imgName: ["csa-act-sp.png", "csa-act-sy.png", "csa-act-by.png", "csa-act-jn.png", "csa-act-sz.png", "csa-act-jx.png", "csa-act-shizi.png", "csa-act-cn.png", "csa-act-tp.png", "csa-act-tx.png", "csa-act-ss.png", "csa-act-mj.png"], // 十二星座默认图
                            anchorName: ["虚位以待", "虚位以待", "虚位以待", "虚位以待", "虚位以待", "虚位以待", "虚位以待", "虚位以待", "虚位以待", "虚位以待", "虚位以待", "虚位以待"], // 十二星座默认名字
                            xzName: ["水瓶座", "双鱼座", "白羊座", "金牛座", "双子座", "巨蟹座", "狮子座", "处女座", "天秤座", "天蝎座", "射手座", "摩羯座"],
                            xzdate: ["1.20-2.18", "2.18-3.20", "3.21-4.19", "4.20-5.20", "5.21-6.21", "6.22-7.22", "7.23-8.22", "8.23-9.22", "9.23-10.23", "10.24-11.22", "11.23-12.21", "12.22-1.19"], // 十二星座时间
                            nowSelItem: (showInfo.name_now - 1)
                        }
                        function replaceArr (anchorInfo, activitylist, attribute) {
                            for (var i = 0; i < anchorInfo.length; i++) {
                                for (var j = 0; j < activitylist.length; j++) {
                                    if (i == (activitylist[j].sort - 1) && attribute == "head") {
                                        anchorInfo[i] = activitylist[j].head
                                    } else if (i == (activitylist[j].sort - 1) && attribute == "nickname") {
                                        anchorInfo[i] = activitylist[j].nickname
                                    }
                                };
                            };
                        }
                        replaceArr(defaultPic.imgName, showInfo.activitylist, "head")
                        replaceArr(defaultPic.anchorName, showInfo.activitylist, "nickname")

                        ; // 十二星座默认图
                        var xztimeCon = '';
                        for (var i = 0; i < defaultPic.imgName.length; i++) {
                            xztimeCon += '<li class="csa-act-xzitem white text-center"><div class="csa-act-xzpic"><img src="' + uploadUrl + defaultPic.imgName[i] + '" alt="" /></div><div class="csa-act-ancname">' + defaultPic.anchorName[i] + '</div><span class="csa-act-xzname block">' + defaultPic.xzName[i] + '</span><em class="csa-act-xztime block">' + defaultPic.xzdate[i] + '</em></li>'
                        };
                        $(".csa-act-xzlist").empty("");
                        $(".csa-act-xzlist").append(xztimeCon);
                        $(".csa-act-xzitem").eq(defaultPic.nowSelItem).addClass("csa-act-xzitemsel");
                    } else if (signState == 0) {
                        erroralt(); // 系统忙弹窗
                    }
                }
            })

            // 系统忙弹窗
            function erroralt () {
                $(".csa-act-fadealert").html("系统忙")
                $(".five-t-fadealert").fadeIn(300, function () {
                    // 弹窗提示淡出
                    $(this).fadeOut(2800);
                })
            }
        </script>
    </body>
</html>