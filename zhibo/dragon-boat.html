<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>粽情端午</title>
        <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
        <meta name="format-detection" content="telephone=no">
        <link rel="stylesheet" type="text/css" href="css/activitys.css">
        <style type="text/css">
            html, body {
                width: 100%;
                background: #d9efc0;
            }
        </style>
    </head>
    <body>
        <div class="dragon-b-wrap position-rel">
            <header class="dragon-b-head">
                <img class="block img" src="images/demoimages/pic123.png" alt="" />
            </header>
            <div class="dragon-b-rank">
                <!-- 第二名 -->
                <!-- <div class="dragon-b-ranktwo">
                    <div class="dragon-b-rankimg position-rel">
                        <em class="position-abs"></em>
                        <img class="block" src="images/demoimages/pic12.png" alt="" />
                        <span class="position-abs"></span>
                    </div>
                    <p class="dragon-b-rankname text-center weight-bold">Kristin汀汀汀</p>
                    <div class="dragon-b-ranknum text-center nine">星光值：<span>99999999</span></div>
                </div> -->
                <!-- 第一名 -->
                <!-- <div class="dragon-b-rankone">
                    <div class="dragon-b-rankimg position-rel">
                        <em class="position-abs"></em>
                        <img class="block" src="images/demoimages/pic12.png" alt="" />
                        <span class="position-abs"></span>
                    </div>
                    <p class="dragon-b-rankname text-center weight-bold">Kristin汀汀汀</p>
                    <div class="dragon-b-ranknum text-center nine">星光值：<span>99999999</span></div>
                </div> -->
                <!-- 第三名 -->
                <!-- <div class="dragon-b-rankthree">
                    <div class="dragon-b-rankimg position-rel">
                        <em class="position-abs"></em>
                        <img class="block" src="images/demoimages/pic12.png" alt="" />
                        <span class="position-abs"></span>
                    </div>
                    <p class="dragon-b-rankname text-center weight-bold">Kristin汀汀汀</p>
                    <div class="dragon-b-ranknum text-center nine">星光值：<span>99999999</span></div>
                </div> -->
            </div>
            <div class="dragon-b-sec">
                <div class="dragon-b-nav twenty-four clearfix">
                    <div class="dragon-b-navitem text-center left">
                        <span class="block">8强</span>
                        <em class="block">6月6日</em>
                    </div>
                    <div class="dragon-b-navitem text-center left">
                        <span class="block">16强</span>
                        <em class="block">6月5日</em>
                    </div>
                    <div class="dragon-b-navitem text-center left">
                        <span class="block">32强</span>
                        <em class="block">6月4日</em>
                    </div>
                    <div class="dragon-b-navitem text-center left">
                        <span class="block">海选</span>
                        <em class="block">6月3日</em>
                    </div>
                </div>
                <div class="dragon-b-listcom">
                    <div class="dragon-b-listhead text-center weight-bold twenty-four">
                        <span>TOP</span>
                        <span>主播头像</span>
                        <span>昵称</span>
                        <span>星光值</span>
                    </div>
                    <div id="dragon-b-listbox" class="dragon-b-listbox">
                        <!-- <ul id="dragon-b-list" class="dragon-b-list">
                            <li class="dragon-b-item dragon-b-itemone">
                                <span class="thirty"><i></i></span>
                                <div class="dragon-b-anchorpic">
                                    <img class="block" src="images/demoimages/pic48.png" alt="" />
                                </div>
                                <span>汀汀汀</span>
                                <span>8888888</span>
                            </li>
                            <li class="dragon-b-item dragon-b-itemtwo">
                                <span class="thirty"><i></i></span>
                                <div class="dragon-b-anchorpic">
                                    <img class="block" src="images/demoimages/pic48.png" alt="" />
                                </div>
                                <span>汀汀汀</span>
                                <span>8888888</span>
                            </li>
                            <li class="dragon-b-item dragon-b-itemthree">
                                <span class="thirty"><i></i></span>
                                <div class="dragon-b-anchorpic">
                                    <img class="block" src="images/demoimages/pic48.png" alt="" />
                                </div>
                                <span>汀汀汀</span>
                                <span>8888888</span>
                            </li>
                            <li class="dragon-b-item">
                                <span class="thirty">4</span>
                                <div class="dragon-b-anchorpic">
                                    <img class="block" src="images/demoimages/pic48.png" alt="" />
                                </div>
                                <span>汀汀汀</span>
                                <span>8888888</span>
                            </li>
                            <li class="dragon-b-item">
                                <span class="thirty">14</span>
                                <div class="dragon-b-anchorpic">
                                    <img class="block" src="images/demoimages/pic48.png" alt="" />
                                </div>
                                <span>汀汀汀</span>
                                <span>8888888</span>
                            </li>
                            <li class="dragon-b-item">
                                <span class="thirty">114</span>
                                <div class="dragon-b-anchorpic">
                                    <img class="block" src="images/demoimages/pic48.png" alt="" />
                                </div>
                                <span>汀汀汀</span>
                                <span>8888888</span>
                            </li>
                        </ul> -->
                        <!-- <div class="dragon-b-listempty dragon-b-none">暂未开始</div> -->
                    </div>
                </div>
            </div>
            <footer class="dragon-b-foot weight-bold twenty-six">更多详询客服  微信：livekefu   QQ：965997888<br />本活动最终解释权归美岁直播所有</footer>
            <div class="dragon-b-fixalert text-center position-fix">活动<br />规则<br />及<br />奖励</div>
            <!-- 弹窗 -->
            <div class="dragon-b-alertbg position-fix dragon-b-none">
                <div class="dragon-b-alertbox">
                    <div class="dragon-b-alertcon position-rel">
                        <!-- 关闭按钮 -->
                        <span class="dragon-b-close position-abs"></span>
                        <h2 class="twenty-six text-center weight-bold dragon-b-green">活动规则及奖励</h2>
                        <div class="dragon-b-exp dragon-b-green">
                            <p>活动时间：2019年6月3日-2019年6月6日</p>
                            <p>每天00:00-24:00</p>
                        </div>
                        <ul class="dragon-b-rulelist dragon-b-green">
                            <li>活动玩法：</li>
                            <li>1.活动期间美岁直播将开启全员PK大赛，根据主播“连麦PK”中所得的星光值进行排名，每天累计总星光值排名靠前的主播将进入到下一轮，</li>
                            <li>2.在4天的活动期内会进行4个阶段的争夺，每个阶段为期1天，分别决出32强、16强、8强及最终冠军</li>
                            <li>3.最终星光值4天累计排名最高的三位主播将得到丰厚奖励，奖励将于端午节后3个工作日进行发放</li>
                            <li>活动奖励：</li>
                            <li>第一名：</li>
                            <li>1.周大福 怦然系列 星动 18K金镶钻石吊坠</li>
                            <li>2.星巴克星冰粽礼盒</li>
                            <li>3.APP启动项、首页推荐位</li>
                            <li>4.终身守护（可赠送粉丝）</li>
                            <li>第二名：</li>
                            <li>1.润百颜故宫口红套装3.2g*6支 </li>
                            <li>2.星巴克星冰粽礼盒</li>
                            <li>3.首页推荐位</li>
                            <li>4.包季守护（可赠送粉丝）</li>
                            <li>第三名：</li>
                            <li>1.润百颜故宫口红面膜限量联名款护肤礼盒</li>
                            <li>2.星巴克星冰粽礼盒</li>
                            <li>3.首页推荐位</li>
                            <li>4.包月守护（可赠送粉丝）</li>
                        </ul>
                    </div>
                </div>
            </div>
            <!-- 系统提示弹窗 -->
            <div class="dragon-b-tip text-center white thirty position-fix dragon-b-none"></div>
        </div>
        <script src="js/jquery-1.11.3.min.js" type="text/javascript"></script>
        <script src="js/index.js" type="text/javascript"></script>
        <script>
            // 列表子项颜色交替
            function itemColor () {
                $(".dragon-b-item").each(function (i) {
                    if (i % 2 == 1) {
                        $(this).addClass("dragon-b-itembgcolor");
                    }
                });
            }
            itemColor();

            // tap切换
            $(".dragon-b-navitem").click(function () {
                $(this).siblings(".dragon-b-navitem").removeClass("dragon-b-navitemsel");
                $(this).addClass("dragon-b-navitemsel");

                var itemIndex = $(this).index();
                $(".dragon-b-listbox").empty(""); // 清空列表数据
                document.getElementById("dragon-b-listbox").scrollTop = 0; // 滚动条返回顶部
                if (itemIndex == 0) {
                    if (pageData.list4 == "") {
                        noStart(); // 添加暂未开始
                    } else {
                        addListData(pageData.list4, uploadUrl); // 添加列表信息
                    }
                } else if (itemIndex == 1) {
                    if (pageData.list3 == "") {
                        noStart(); // 添加暂未开始
                    } else {
                        addListData(pageData.list3, uploadUrl); // 添加列表信息
                    }
                } else if (itemIndex == 2) {
                    if (pageData.list2 == "") {
                        noStart(); // 添加暂未开始
                    } else {
                        addListData(pageData.list2, uploadUrl); // 添加列表信息
                    }
                } else if (itemIndex == 3) {
                    if (pageData.list1 == "") {
                        noStart(); // 添加暂未开始
                    } else {
                        addListData(pageData.list1, uploadUrl); // 添加列表信息
                    }
                }
            })

            // // TOP滚屏
            topscroll("dragon-b-listbox", "#dragon-b-listbox", "#dragon-b-list", 1, 50);
            function topscroll (idEve, outerlayer, inlayer, speed, intervaltime) {
                // top魅力值模块滚动
                var luckMain = document.getElementById(idEve);
                var luckSpeed = speed;
                var luckScroll = setInterval(function (){
                    if (luckMain.scrollTop + $(outerlayer).height() >= $(inlayer).height()) {
                        clearInterval(luckScroll);
                        setTimeout(function () {
                            luckMain.scrollTop += luckSpeed;
                            // 滚动到底部时重新滚动
                            luckMain.scrollTop = 0;
                            topscroll("dragon-b-listbox", "#dragon-b-listbox", "#dragon-b-list", 1, 50);
                        }, 1500)
                    } else if(luckMain.scrollTop + $(outerlayer).height() < $(inlayer).height() && luckMain.scrollTop == 0) {
                        clearInterval(luckScroll);
                        setTimeout(function () {
                            luckMain.scrollTop += luckSpeed;
                            topscroll("dragon-b-listbox", "#dragon-b-listbox", "#dragon-b-list", 1, 50);
                        }, 1500)
                    } else {
                        luckMain.scrollTop += luckSpeed;
                    }
                }, intervaltime);
            }

            // 弹窗说明
            $(".dragon-b-fixalert").click(function () {
                $(".dragon-b-alertbg").removeClass("dragon-b-none");
            })
            // 关闭弹窗
            $(".dragon-b-close").click(function () {
                $(".dragon-b-alertbg").addClass("dragon-b-none");
            })
            freeBlank(".dragon-b-alertbg", ".dragon-b-alertbox", "dragon-b-none");

            var pageData = null; // 请求回的数据信息
            var uploadUrl = null; // 头像域名前缀
            $.ajax({
                url: 'http://47.99.95.149:9000/meisuiactivity/activitydragontop/getdragontop',
                type: 'POST',
                dataType: 'json',
                success: function (data) {
                    console.log(data);
                    if (data.sign == 1) {
                        pageData = data.d; // 请求回的数据信息
                        uploadUrl = pageData.uploadUrl; // 头像域名前缀
                        var nowDateJudge = pageData.date; // 当前时间判断
                        if (nowDateJudge == 0) {
                            // 0还未开始
                            navTtemSel(3, ".dragon-b-navitem", "dragon-b-navitemsel"); // tap切换当前选中哪一天

                            noStart(); // 添加暂未开始
                        } else if (nowDateJudge == 1) {
                            navTtemSel(3, ".dragon-b-navitem", "dragon-b-navitemsel"); // tap切换当前选中哪一天

                            if (pageData.list1 == "") {
                                noStart(); // 添加暂未开始
                            } else {
                                addListData(pageData.list1, uploadUrl); // 添加列表信息
                            }

                            threeAnchor(pageData.list1, uploadUrl)
                        } else if (nowDateJudge == 2) {
                            navTtemSel(2, ".dragon-b-navitem", "dragon-b-navitemsel"); // tap切换当前选中哪一天

                            if (pageData.list2 == "") {
                                noStart(); // 添加暂未开始
                            } else {
                                addListData(pageData.list2, uploadUrl); // 添加列表信息
                            }

                            threeAnchor(pageData.list2, uploadUrl)
                        } else if (nowDateJudge == 3) {
                            navTtemSel(1, ".dragon-b-navitem", "dragon-b-navitemsel"); // tap切换当前选中哪一天

                            if (pageData.list3 == "") {
                                noStart(); // 添加暂未开始
                            } else {
                                addListData(pageData.list3, uploadUrl); // 添加列表信息
                            }

                            threeAnchor(pageData.list3, uploadUrl)
                        } else if (nowDateJudge == 4) {
                            navTtemSel(0, ".dragon-b-navitem", "dragon-b-navitemsel"); // tap切换当前选中哪一天

                            if (pageData.list4 == "") {
                                noStart(); // 添加暂未开始
                            } else {
                                addListData(pageData.list4, uploadUrl); // 添加列表信息
                            }

                            threeAnchor(pageData.list4, uploadUrl)
                        } else if (nowDateJudge == 5) {
                            navTtemSel(0, ".dragon-b-navitem", "dragon-b-navitemsel"); // tap切换当前选中哪一天

                            if (pageData.list4 == "") {
                                noStart(); // 添加暂未开始
                            } else {
                                addListData(pageData.list4, uploadUrl); // 添加列表信息
                            }

                            threeAnchor(pageData.list4, uploadUrl)
                        }
                    } else if (data.sign == 0) {
                        $(".dragon-b-tip").html("系统忙");
                        $(".dragon-b-tip").fadeIn(300, function () {
                            // 复制成功提示淡出
                            $(this).fadeOut(2500);
                        })
                    }
                }
            })
            // tap切换当前选中哪一天
            function navTtemSel (eqNum, navItem, navItemSel) {
                $(navItem).eq(eqNum).siblings(navItem).removeClass(navItemSel);
                $(navItem).eq(eqNum).addClass(navItemSel);
                $(".dragon-b-listbox").empty(""); // 清空列表数据
            }
            // 添加暂未开始
            function noStart () {
                $('.dragon-b-listbox').append('<div class="dragon-b-listempty">暂未开始</div>');
            }
            // 添加列表信息
            function addListData (listDel, uploadUrl) {
                var nowListData = listDel;
                var threeClass = ["dragon-b-itemone", "dragon-b-itemtwo", "dragon-b-itemthree"]; // 前三名类
                var addListData = '';
                for (var i = 0; i < nowListData.length; i++) {
                    if (i < 3) {
                        addListData += '<li class="dragon-b-item ' + threeClass[i] + '"><span class="thirty"><i></i></span><div class="dragon-b-anchorpic"><img class="block" src="' + uploadUrl + nowListData[i].head + '" alt="" /></div><span>' + nowListData[i].nickname + '</span><span>' + nowListData[i].total_virtual + '</span></li>';
                    } else {
                        addListData += '<li class="dragon-b-item"><span class="thirty">' + (i + 1) + '</span><div class="dragon-b-anchorpic"><img class="block" src="' + uploadUrl + nowListData[i].head + '" alt="" /></div><span>' + nowListData[i].nickname + '</span><span>' + nowListData[i].total_virtual + '</span></li>';
                    }
                };
                $(".dragon-b-listbox").append('<ul id="dragon-b-list" class="dragon-b-list">' + addListData + '</ul>');
                itemColor(); // 列表子项颜色交替
            }
            // 前三名主播信息
            function threeAnchor (listCon, uploadUrl) {
                $(".dragon-b-rank").empty("");
                if (listCon.length < 3) {
                    $(".dragon-b-rank").addClass("dragon-b-none");
                } else {
                    $(".dragon-b-rank").removeClass("dragon-b-none");
                    $(".dragon-b-rank").append('<div class="dragon-b-ranktwo"><div class="dragon-b-rankimg position-rel"><em class="position-abs"></em><img class="block" src="' + uploadUrl + listCon[1].head + '" alt="" /><span class="position-abs"></span></div><p class="dragon-b-rankname text-center weight-bold">' + listCon[1].nickname + '</p><div class="dragon-b-ranknum text-center nine">星光值：<span>' + listCon[1].total_virtual + '</span></div></div><div class="dragon-b-rankone"><div class="dragon-b-rankimg position-rel"><em class="position-abs"></em><img class="block" src="' + uploadUrl + listCon[0].head + '" alt="" /><span class="position-abs"></span></div><p class="dragon-b-rankname text-center weight-bold">' + listCon[0].nickname + '</p><div class="dragon-b-ranknum text-center nine">星光值：<span>' + listCon[0].total_virtual + '</span></div></div><div class="dragon-b-rankthree"><div class="dragon-b-rankimg position-rel"><em class="position-abs"></em><img class="block" src="' + uploadUrl + listCon[2].head + '" alt="" /><span class="position-abs"></span></div><p class="dragon-b-rankname text-center weight-bold">' + listCon[2].nickname + '</p><div class="dragon-b-ranknum text-center nine">星光值：<span>' + listCon[2].total_virtual + '</span></div></div>');
                }
            }
        </script>
    </body>
</html>