<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>深情告白,邀你共赏月</title>
        <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
        <meta name="format-detection" content="telephone=no">
        <link rel="stylesheet" type="text/css" href="css/activitys.css">
        <style type="text/css">
            html, body {
                width: 100%;
                background-color: #e4e2d5;
            }
            .mid-aut-wrap .none {
                display: none;
            }
        </style>
    </head>
    <body>
        <div class="mid-aut-wrap position-rel">
            <header class="mid-aut-head">
                <img class="block img" src="images/demoimages/pic153.png" alt="" />
            </header>
            <div class="mid-aut-giftmod">
                <div class="mid-aut-gifttit">
                    <img class="block" src="images/demoimages/pic154.png" alt="" />
                </div>
                <div class="mid-aut-giftsec">
                    <div class="mid-aut-giftexp mid-aut-golden text-center">赠送心爱的女神中秋特定礼物，完成你的告白</div>
                    <ul class="mid-aut-giftlist">
                        <li class="mid-aut-giftitem text-center">
                            <div class="mid-aut-giftpic">
                                <img class="block" src="images/demoimages/pic157_1.png" alt="" />
                            </div>
                            <span class="block three">月饼</span>
                            <em class="block six twenty-four">50钻</em>
                        </li>
                        <li class="mid-aut-giftitem text-center">
                            <div class="mid-aut-giftpic">
                                <img class="block" src="images/demoimages/pic158.png" alt="" />
                            </div>
                            <span class="block three">中秋月圆</span>
                            <em class="block six twenty-four">8150钻</em>
                        </li>
                        <li class="mid-aut-giftitem text-center">
                            <div class="mid-aut-giftpic">
                                <img class="block" src="images/demoimages/pic159.png" alt="" />
                            </div>
                            <span class="block three">告白超跑</span>
                            <em class="block six twenty-four">52000钻</em>
                        </li>
                        <li class="mid-aut-giftitem text-center">
                            <div class="mid-aut-giftpic">
                                <img class="block" src="images/demoimages/pic160.png" alt="" />
                            </div>
                            <span class="block three">漫天花舞</span>
                            <em class="block six twenty-four">66600钻</em>
                        </li>
                        <li class="mid-aut-giftitem text-center">
                            <div class="mid-aut-giftpic">
                                <img class="block" src="images/demoimages/pic161.png" alt="" />
                            </div>
                            <span class="block three">爱情宣言</span>
                            <em class="block six twenty-four">99520钻</em>
                        </li>
                        <li class="mid-aut-giftitem text-center">
                            <div class="mid-aut-giftpic">
                                <img class="block" src="images/demoimages/pic162.png" alt="" />
                            </div>
                            <span class="block three">环球之旅</span>
                            <em class="block six twenty-four">205200钻</em>
                        </li>
                    </ul>
                    <p class="mid-aut-gifttip six twenty-four">活动期间赠送主播6种中秋特定礼物累计星光值，最终星光值排名前三的主播及对应真爱粉丝将获得丰厚奖励(注：赠送非中秋特定礼物不计算在评比范围内)</p>
                </div>
            </div>
            <div class="mid-aut-gbmod">
                <div class="mid-aut-gbtit">
                    <img class="block" src="images/demoimages/pic155.png" alt="" />
                </div>
                <div class="mid-aut-gbexp text-center six twenty-four">活动期间总榜，赠送礼物和心爱的女神一起上榜</div>
                <div class="mid-aut-gbsec">
                    <div class="mid-aut-gbthead thirty text-center mid-aut-golden">
                        <span>排名</span>
                        <span>女神</span>
                        <span>真爱粉丝</span>
                    </div>
                    <div id="mid-aut-gbshow" class="mid-aut-gbshow">
                        <ul id="mid-aut-gblist" class="mid-aut-gblist">
                            <!-- <li class="mid-aut-gbitem">
                                <span class="mid-aut-gbnum weight-bold mid-aut-golden">1</span>
                                <div class="mid-aut-gbanchor">
                                    <img src="images/demoimages/pic48.png" alt="" />
                                    <div class="mid-aut-gbaninfo">
                                        <span class="block three thirty">伊丽莎白</span>
                                        <em class="block nine twenty-six">贡献值:6400w</em>
                                    </div>
                                </div>
                                <div class="mid-aut-gbuser">
                                    <img src="images/demoimages/pic48.png" alt="" />
                                    <div class="mid-aut-gbusinfo">
                                        <span class="block three thirty">伊丽莎白</span>
                                        <em class="block nine twenty-six">贡献值:6400w</em>
                                    </div>
                                </div>
                            </li> -->
                        </ul>
                        <div class="mid-aut-emptydata thirty-two text-center none">暂无数据</div>
                    </div>
                </div>
            </div>
            <div class="mid-aut-jlmod">
                <div class="mid-aut-jltit">
                    <img class="block" src="images/demoimages/pic156.png" alt="" />
                </div>
                <div class="mid-aut-jlexp text-center six twenty-four">所有奖励将于活动结束后3个工作日发放</div>
                <div class="mid-aut-jlsec">
                    <div class="mid-aut-jltap text-center nine twenty-six">
                        <span class="mid-aut-jltapsel">主播奖励</span>
                        <span>粉丝奖励</span>
                    </div>
                    <div class="mid-aut-jlcon text-center">
                        <ul class="mid-aut-anchorul">
                            <li>
                                <h2 class="weight-bold three">第一名</h2>
                                <p class="nine">周大生3600月满项链</p>
                                <p class="nine">终身守护(可赠送粉丝)</p>
                                <p class="nine">美岁年终庆典资格</p>
                            </li>
                            <li>
                                <h2 class="weight-bold three">第二名</h2>
                                <p class="nine">施华洛世奇1290星辰项链</p>
                                <p class="nine">包季守护(可赠送粉丝)</p>
                            </li>
                            <li>
                                <h2 class="weight-bold three">第三名</h2>
                                <p class="nine">施华洛世奇589星光项链</p>
                                <p class="nine">包月守护(可赠送粉丝)</p>
                            </li>
                        </ul>
                        <ul class="mid-aut-fansul none">
                            <li>
                                <h2 class="weight-bold three">第一名</h2>
                                <p class="nine">终身守护</p>
                                <p class="nine">52000表白钻</p>
                            </li>
                            <li>
                                <h2 class="weight-bold three">第二名</h2>
                                <p class="nine">包季守护</p>
                                <p class="nine">52000表白钻</p>
                            </li>
                            <li>
                                <h2 class="weight-bold three">第三名</h2>
                                <p class="nine">包月守护</p>
                                <p class="nine">52000表白钻</p>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="mid-aut-foot six text-center">更多详询客服 微信：livekefu   QQ：965997888<br />本活动最终解释权归美岁直播所有</div>
            <!-- 渐隐提示弹窗 -->
            <div class="mid-aut-fadealert text-center thirty white position-fix none"></div>
        </div>
        <script src="js/jquery-1.11.3.min.js" type="text/javascript"></script>
        <script src="js/index.js" type="text/javascript"></script>
        <script>
            $.ajax({
                url: 'http://10.0.0.167:8080/activitytop/gettop',
                type: 'post',
                dataType: 'json',
                success: function (data) {
                    console.log(data)
                    var sign = data.sign;
                    if (sign == 0) {
                        $(".mid-aut-fadealert").html("系统忙");
                        $(".mid-aut-fadealert").fadeIn(300, function() {
                            $(".mid-aut-fadealert").fadeOut(2800);
                        });
                        $(".mid-aut-gblist").addClass("none");
                        $(".mid-aut-emptydata").removeClass("none");
                    } else if (sign == 1) {
                        var uploadUrl = data.d.uploadUrl; // 图像域名
                        var listData = data.d.list; // 获取服务端给的数据
                        var listCon = ""; // 主播列表
                        if (listData.length == 0) {
                            $(".mid-aut-gblist").addClass("none");
                            $(".mid-aut-emptydata").removeClass("none");
                        } else {
                            $(".mid-aut-emptydata").addClass("none");
                            $(".mid-aut-gblist").removeClass("none");
                        }
                        var anchorTotalvirtual = [];
                        var sendTotalvirtual = [];
                        for (var i = 0; i < listData.length; i++) {
                            function numCount (itemNums, newArrs) {
                                if (itemNums < 10000) {
                                    var numDel = itemNums + ''
                                    newArrs.push(numDel);
                                } else if(itemNums >= 10000 && itemNums < 100000000) {
                                    var numDel = parseInt(itemNums / 10000) + '万'
                                    newArrs.push(numDel);
                                } else if(itemNums >= 100000000) {
                                    var numDel = parseInt(itemNums / 100000000) + '亿'
                                    newArrs.push(numDel);
                                }
                            }
                            numCount(listData[i].anchor_totalvirtual, anchorTotalvirtual)
                            numCount(listData[i].send_totalvirtual, sendTotalvirtual)

                            listCon += '<li class="mid-aut-gbitem"><span class="mid-aut-gbnum weight-bold mid-aut-golden">' + (i + 1) + '</span><div class="mid-aut-gbanchor"><img src="' + uploadUrl + listData[i].anchor_head + '" alt="" /><div class="mid-aut-gbaninfo"><span class="block three thirty">' + listData[i].anchor_name + '</span><em class="block nine twenty-six">星光值:' + anchorTotalvirtual[i] + '</em></div></div><div class="mid-aut-gbuser"><img src="' + uploadUrl + listData[i].send_head + '" alt="" /><div class="mid-aut-gbusinfo"><span class="block three thirty">' + listData[i].send_name + '</span><em class="block nine twenty-six">贡献值:' + sendTotalvirtual[i] + '</em></div></div></li>'
                        };
                        $(".mid-aut-gblist").empty();
                        $(".mid-aut-gblist").append(listCon);
                    }
                }
            })

            // 排行榜滚动
            topscroll("mid-aut-gbshow", "#mid-aut-gbshow", "#mid-aut-gblist", 1, 50);
            function topscroll (idEve, outerlayer, inlayer, speed, intervaltime) {
                // 排行榜滚动
                var luckMain = document.getElementById(idEve);
                var luckSpeed = speed;
                var luckScroll = setInterval(function (){
                    if (luckMain.scrollTop + $(outerlayer).height() >= $(inlayer).height()) {
                        clearInterval(luckScroll);
                        setTimeout(function () {
                            luckMain.scrollTop += luckSpeed;
                            // 滚动到底部时重新滚动
                            luckMain.scrollTop = 0;
                            topscroll("mid-aut-gbshow", "#mid-aut-gbshow", "#mid-aut-gblist", 1, 50);
                        }, 1500)
                    } else if(luckMain.scrollTop + $(outerlayer).height() < $(inlayer).height() && luckMain.scrollTop == 0) {
                        clearInterval(luckScroll);
                        setTimeout(function () {
                            luckMain.scrollTop += luckSpeed;
                            topscroll("mid-aut-gbshow", "#mid-aut-gbshow", "#mid-aut-gblist", 1, 50);
                        }, 1500)
                    } else {
                        luckMain.scrollTop += luckSpeed;
                    }
                }, intervaltime);
            }

            // 奖励榜tap切换
            $(".mid-aut-jltap span").click(function (e) {
                $(this).addClass("mid-aut-jltapsel");
                $(this).siblings("span").removeClass("mid-aut-jltapsel");
                $(".mid-aut-jlcon ul").eq($(this).index()).removeClass("none");
                $(".mid-aut-jlcon ul").eq($(this).index()).siblings("ul").addClass("none");
            })
        </script>
    </body>
</html>