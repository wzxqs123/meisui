<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>周星闪耀战</title>
        <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
        <meta name="format-detection" content="telephone=no">
        <link rel="stylesheet" type="text/css" href="css/index.css">
        <style type="text/css">
            body, html {
                width: 100%;
                background-color: #f0a0c3;
            }
            @font-face {
                font-family: "zhtsbdt";
                src: url("font/zhtsbdt/zhtsbdt.eot"); /* IE9 */
                src: url("font/zhtsbdt/zhtsbdt.eot?#iefix") format("embedded-opentype"), /* IE6-IE8 */
                url("font/zhtsbdt/zhtsbdt.woff") format("woff"), /* chrome、firefox */
                url("font/zhtsbdt/zhtsbdt.ttf") format("truetype"), /* chrome、firefox、opera、Safari, Android, iOS 4.2+ */
                url("font/zhtsbdt/zhtsbdt.svg#zhtsbdt") format("svg"); /* iOS 4.1- */
                font-style: normal;
                font-weight: normal;
            }
            .new-week-wrap .none {
                display: none;
            }
        </style>
    </head>
    <body>
        <div class="new-week-wrap position-rel">
            <header class="new-week-head">
                <img class="block img" src="images/demoimages/pic163.png" alt="" />
            </header>
            <div class="new-week-gift">
                <h2 class="new-week-gifttit thirty-two white text-center">本周星礼物</h2>
                <ul class="new-week-giftlist">
                    <!-- <li class="new-week-giftitem">
                        <img class="block" src="images/demoimages/pic89.png" alt="" />
                    </li>
                    <li class="new-week-giftitem">
                        <img class="block" src="images/demoimages/pic89.png" alt="" />
                    </li>
                    <li class="new-week-giftitem">
                        <img class="block" src="images/demoimages/pic89.png" alt="" />
                    </li>
                    <li class="new-week-giftitem">
                        <img class="block" src="images/demoimages/pic89.png" alt="" />
                    </li> -->
                </ul>
            </div>
            <div class="new-week-section">
                <h2 class="new-week-gifttit thirty-two white text-center">周星榜单</h2>
                <div class="new-week-navs twenty-six">
                    <span class="new-week-navsel text-center">周星榜单</span>
                    <span class="text-center">上周周星</span>
                    <span class="text-center">周星富豪</span>
                    <span class="text-center">上周富豪</span>
                </div>
                <div class="new-week-secmain">
                    <!-- <div class="new-week-classify">
                        <div class="new-week-lwname">
                            <img class="block" src="images/demoimages/pic89.png" alt="" />
                            <span class="twenty-six block">爱情座驾</span>
                        </div>
                        <ul class="new-week-lwlist">
                            <li class="new-week-lwitem">
                                <span class="new-week-lwrank white text-center">1</span>
                                <p class="new-week-username">我的小团团</p>
                                <div class="new-week-lwnums">
                                    <i></i>
                                    <em class="three">1000</em>
                                </div>
                            </li>
                            <li class="new-week-lwitem">
                                <span class="new-week-lwrank white text-center">2</span>
                                <p class="new-week-username">我的小团团</p>
                                <div class="new-week-lwnums">
                                    <i></i>
                                    <em class="three">1000</em>
                                </div>
                            </li>
                            <li class="new-week-lwitem">
                                <span class="new-week-lwrank white text-center">3</span>
                                <p class="new-week-username">我的小团团</p>
                                <div class="new-week-lwnums">
                                    <i></i>
                                    <em class="three">1000</em>
                                </div>
                            </li>
                            <li class="new-week-lwitem">
                                <span class="new-week-lwrank white text-center">4</span>
                                <p class="new-week-username">我的小团团</p>
                                <div class="new-week-lwnums">
                                    <i></i>
                                    <em class="three">1000</em>
                                </div>
                            </li>
                        </ul>
                        <div class="new-week-lwempty text-center none">暂无数据</div>
                    </div> -->
                </div>
            </div>
            <div class="new-week-actmod">
                <h2 class="new-week-gifttit thirty-two white text-center">活动规则/奖励</h2>
                <div class="new-week-rule">
                    <div class="new-week-ruletit text-center">活动规则</div>
                    <ul class="new-week-rulecon twenty-six six">
                        <li>周星礼物每周共4样，当周收到/贡献对应周星礼物第一名的主播/富豪将获得周星奖励。</li>
                        <li>(注：除大满贯外，同一主播/富豪对应周星奖励可叠加)</li>
                    </ul>
                </div>
                <div class="new-week-reward">
                    <div class="new-week-ruletit text-center">活动奖励</div>
                    <div class="new-week-rewardmain">
                        <h3 class="thirty-two text-center">大满贯主播</h3>
                        <span class="new-week-rewardtip twenty-four six block text-center">（4个礼物皆为第一）</span>
                        <div class="new-week-rewardshow">
                            <div class="new-week-rewardone">
                                <img class="block" src="images/demoimages/pic164_2.png" alt="" />
                                <span class="block twenty-six nine">3999元现金红包</span>
                            </div>
                            <div class="new-week-rewardtwo">
                                <img class="block" src="images/demoimages/pic165.png" alt="" />
                                <span class="block twenty-six nine">终身守护（可赠送粉丝）</span>
                            </div>
                        </div>
                    </div>
                    <div class="new-week-rulevice">
                        <div class="new-week-ruleleft">
                            <h3 class="thirty-two text-center">周星主播</h3>
                            <img class="block" src="images/demoimages/pic166_1.png" alt="" />
                            <span class="twenty-six nine text-center">888元现金红包</span>
                        </div>
                        <div class="new-week-ruleright">
                            <h3 class="thirty-two text-center">周星富豪</h3>
                            <img class="block" src="images/demoimages/pic167.png" alt="" />
                            <span class="twenty-six nine text-center">包月守护</span>
                        </div>
                    </div>
                </div>
            </div>
            <footer class="new-week-foot white text-center">更多详询客服 微信：meisuilive   QQ：965997888<br />本活动最终解释权归美岁直播所有</footer>
        </div>
        <script src="js/jquery-1.11.3.min.js" type="text/javascript"></script>
        <script src="js/index.js" type="text/javascript"></script>
        <script type="text/javascript">
            var newListIndex = 0; // 默认为0
            $(".new-week-navs span").click(function () {
                $(this).addClass("new-week-navsel");
                $(this).siblings("span").removeClass("new-week-navsel");
                newListIndex = $(this).index();
                obtainRes(); // 重新请求新数据
            })

            var serverUrl = "http://10.0.0.170:8080/meisuishare/"
            // 获取本周周星的图片
            $.ajax({
                url: serverUrl + 'week/getgift',
                type: 'get',
                dataType: 'json',
                success: function (data) {
                    console.log(data)
                    var imgPrefix = data.uploadUrl;
                    var weekStarImg = '';
                    var imgList = data.giftpic_list;
                    for (var i = 0; i < imgList.length; i++) {
                        weekStarImg += '<li class="new-week-giftitem"><img class="block" src="' + imgPrefix + imgList[i].gift_head + '" alt="" /></li>'
                    };
                    $(".new-week-giftlist").empty('');
                    $(".new-week-giftlist").append(weekStarImg);
                }
            })
            // 获取周星榜单列表 默认status=0
            obtainRes()
            function obtainRes () {
                $.ajax({
                    url: serverUrl + 'week/main',
                    type: 'get',
                    dataType: 'json',
                    data: {
                        status: newListIndex
                    },
                    success: function (data) {
                        console.log(data);
                        var imgPrefix = data.uploadUrl;
                        var classifys = '';
                        $(".new-week-secmain").empty('');
                        for (var nums = 0; nums < data.maplist.length; nums++) {
                            classifys += '<div class="new-week-classify"><div class="new-week-lwname"></div><ul class="new-week-lwlist"></ul><div class="new-week-lwempty none text-center">暂无数据</div></div>' // 几个礼物的大分类模块
                        };
                        $(".new-week-secmain").append(classifys);

                        for (var j = 0; j < data.maplist.length; j++) {
                            var dataList = '';
                            var resList = data.maplist[j].week_anchorList; // 每一项的列表数据
                            if (resList.length != 0) {
                                for (var i = 0; i < resList.length; i++) {
                                    dataList += '<li class="new-week-lwitem"><span class="new-week-lwrank white text-center">' + (i + 1) + '</span><p class="new-week-username">' + resList[i].nickname + '</p><div class="new-week-lwnums"><i></i><em class="three">' + resList[i].gift_count + '</em></div></li>'
                                };
                                $(".new-week-classify").eq(j).children(".new-week-lwlist").empty("");
                                $(".new-week-classify").eq(j).children(".new-week-lwlist").append(dataList);
                            } else {
                                $(".new-week-classify").eq(j).children(".new-week-lwlist").addClass("none");
                                $(".new-week-classify").eq(j).children(".new-week-lwempty").removeClass("none");
                            }
                            

                            var giftName = '<img class="block" src="' + imgPrefix + data.maplist[j].gift_head +'" alt="" /><span class="twenty-six block">' + data.maplist[j].gift_name +'</span>';
                            $(".new-week-classify").eq(j).children(".new-week-lwname").empty("");
                            $(".new-week-classify").eq(j).children(".new-week-lwname").append(giftName);
                        };
                    }
                })
            }
            
        </script>
    </body>
</html>