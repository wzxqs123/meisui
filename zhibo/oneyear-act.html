<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>美岁周年庆</title>
        <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
        <meta name="format-detection" content="telephone=no">
        <link rel="stylesheet" type="text/css" href="http://img1.szdc666.com/activitys.css">
        <style type="text/css">
            html, body {
                width: 100%;
                background-color: #056258;
            }
            @font-face {
                font-family: "zz55lyss";
                src: url("http://img1.szdc666.com/font/zz55lyss/zz55lyss.eot"); /* IE9 */
                src: url("http://img1.szdc666.com/font/zz55lyss/zz55lyss.eot?#iefix") format("embedded-opentype"), /* IE6-IE8 */
                
                url("http://img1.szdc666.com/font/zz55lyss/zz55lyss.woff") format("woff"), /* chrome、firefox */
                url("http://img1.szdc666.com/font/zz55lyss/zz55lyss.ttf") format("truetype"), /* chrome、firefox、opera、Safari, Android, iOS 4.2+ */
                
                url("http://img1.szdc666.com/font/zz55lyss/zz55lyss.svg#zz55lyss") format("svg"); /* iOS 4.1- */
                font-style: normal;
                font-weight: normal;
            }
            .oney-a-wrap .none {
                display: none;
            }
        </style>
    </head>
    <body>
        <div class="oney-a-wrap position-rel">
            <header class="oney-a-head">
                <img src="http://img1.szdc666.com/pic130.png" alt="" class="block img" />
            </header>
            <div class="oney-a-bmbut position-rel"></div>
            <div class="oney-a-sec">
                <h2 class="oney-a-sectit text-center position-rel">
                    <i class="position-abs"></i>
                    <i class="position-abs"></i>
                    <i class="position-abs"></i>
                    <i class="position-abs"></i>
                    <span><img class="block img" src="http://img1.szdc666.com/pic151.png" alt="" /></span>
                </h2>
                <div class="oney-a-peolist">
                    <div class="oney-a-peoitem oney-a-peoitemsel">
                        <img src="http://img1.szdc666.com/xssel.png" alt="" />
                        <span class="three">西施</span>
                    </div>
                    <div class="oney-a-peoitem">
                        <img src="http://img1.szdc666.com/wzj.png" alt="" />
                        <span class="three">王昭君</span>
                    </div>
                    <div class="oney-a-peoitem">
                        <img src="http://img1.szdc666.com/dc.png" alt="" />
                        <span class="three">貂蝉</span>
                    </div>
                    <div class="oney-a-peoitem">
                        <img src="http://img1.szdc666.com/ygf.png" alt="" />
                        <span class="three">杨贵妃</span>
                    </div>
                </div>
                <div class="oney-a-list">
                    <div class="oney-a-listtit text-center">
                        <span>排名</span>
                        <span>仙女</span>
                        <span>星光值</span>
                    </div>
                    <div id="oney-a-listshow" class="oney-a-listshow">
                        <ul id="oney-a-listcon" class="oney-a-listcon">
                            <!-- <li class="oney-a-item">
                                <span class="oney-a-sort oney-a-sortone thirty"><i></i></span>
                                <div class="oney-a-anchor">
                                    <img class="oney-a-anchorpic" src="http://img1.szdc666.com/pic12.png" alt="" />
                                    <div class="oney-a-anchorinfo">
                                        <span class="block thirty three">那宝贝</span>
                                        <em class="block twenty-six">ID:77777777</em>
                                    </div>
                                </div>
                                <span class="oney-a-xgz thirty three">888888888</span>
                            </li>
                            <li class="oney-a-item">
                                <span class="oney-a-sort thirty">4</span>
                                <div class="oney-a-anchor">
                                    <img class="oney-a-anchorpic" src="http://img1.szdc666.com/pic12.png" alt="" />
                                    <div class="oney-a-anchorinfo">
                                        <span class="block thirty three">那宝贝</span>
                                        <em class="block twenty-six">ID:77777777</em>
                                    </div>
                                </div>
                                <span class="oney-a-xgz thirty three">888888888</span>
                            </li> -->
                        </ul>
                    </div>
                    <div class="oney-a-emptydata thirty-two none">快来报名竞选四大仙女</div>
                </div>
            </div>
            <div class="oney-a-reward">
                <h2 class="oney-a-rewtit text-center position-rel">
                    <i class="position-abs"></i>
                    <i class="position-abs"></i>
                    <i class="position-abs"></i>
                    <i class="position-abs"></i>
                    <span><img class="block img" src="images/demoimages/pic152.png" alt="" /></span>
                </h2>
                <div class="oney-a-rewardcon">
                    <div class="oney-a-taptit weight-bold">
                        <span class="oney-a-taptitact">活动奖励</span>
                        <span>活动规则</span>
                    </div>
                    <i class="oney-a-divide block"></i>
                    <div class="oney-a-showcom">
                        <div class="oney-a-rewshow">
                            <div class="oney-a-rewshowtit weight-bold text-center">四大仙女奖励</div>
                            <div class="oney-a-rewshowcon">
                                <div>
                                    <img src="http://img1.szdc666.com/pic131.png" alt="" />
                                    <span class="block text-center">3344仙女项链</span>
                                </div>
                                <div>
                                    <img src="http://img1.szdc666.com/pic132.png" alt="" />
                                    <span class="block text-center">美岁2019年终庆典名额</span>
                                </div>
                                <div>
                                    <img src="http://img1.szdc666.com/pic133.png" alt="" />
                                    <span class="block text-center">APP启动图海报</span>
                                </div>
                                <div>
                                    <img src="http://img1.szdc666.com/pic134.png" alt="" />
                                    <span class="block text-center">终身守护（可赠送粉丝）</span>
                                </div>
                            </div>
                        </div>
                        <ul class="oney-a-rule none">
                            <li>1.主播需在活动页报名才可参加活动，报名时可选择“西施、王昭君、貂蝉、杨贵妃”四大美女中的一位进行竞选，报名成功后将无法修改，请谨慎选择</li>
                            <li>2.报名成功后，用户赠送礼物给主播即可帮助主播提升星光值，角逐四大美女排行榜</li>
                            <li>3.最终四个排行榜中排行第一的主播可获得丰厚奖励</li>
                            <li>4.本活动所有奖励将于活动结束后3个工作日内发放</li>
                        </ul>
                    </div>
                </div>
            </div>
            <footer class="oney-a-foot twenty-four text-center">更多详询客服 微信：livekefu QQ：965997888<br />本活动最终解释权归美岁直播所有</footer>
            <!-- 四大美女弹窗 -->
            <div class="oney-a-choicebg position-fix none">
                <div class="oney-a-choiceale">
                    <div class="oney-a-choicetit">
                        <span class="oney-a-choicetitsel">西施</span>
                        <span>王昭君</span>
                        <span>貂蝉</span>
                        <span>杨贵妃</span>
                    </div>
                    <i class="oney-a-choiceline block"></i>
                    <div class="oney-a-choicecon">
                        <!-- 西施 -->
                        <div class="oney-a-choicexs">
                            <img src="http://img1.szdc666.com/pic135.png" alt="" />
                            <div class="oney-a-xspoetry text-center position-rel">
                                <i class="oney-a-poetryone position-abs"></i>
                                <i class="oney-a-poetrytwo position-abs"></i>
                                <i class="oney-a-poetrythree position-abs"></i>
                                <i class="oney-a-poetryfour position-abs"></i>
                                <span class="thirty three">一代倾城逐浪花，<br />吴宫空自忆儿家。<br />效颦莫笑东村女，<br />头白溪边尚浣纱。</span>
                            </div>
                        </div>
                        <!-- 王昭君 -->
                        <div class="oney-a-choicewzj none">
                            <img src="http://img1.szdc666.com/pic136.png" alt="" />
                            <div class="oney-a-wzjpoetry text-center position-rel">
                                <i class="oney-a-poetryone position-abs"></i>
                                <i class="oney-a-poetrytwo position-abs"></i>
                                <i class="oney-a-poetrythree position-abs"></i>
                                <i class="oney-a-poetryfour position-abs"></i>
                                <span class="thirty three">汉恩自浅胡恩深，<br />人生乐在相知心。<br />可怜青冢已芜没，<br />尚有哀弦留至今。</span>
                            </div>
                        </div>
                        <!-- 貂蝉 -->
                        <div class="oney-a-choicedc none">
                            <div class="oney-a-dcpoetry text-center position-rel">
                                <i class="oney-a-poetryone position-abs"></i>
                                <i class="oney-a-poetrytwo position-abs"></i>
                                <i class="oney-a-poetrythree position-abs"></i>
                                <i class="oney-a-poetryfour position-abs"></i>
                                <span class="thirty three">天香美誉数貂婵，<br />闭月佳人貌若仙。<br />千古凤仪成绝剧，<br />连环妙计巧周旋。</span>
                            </div>
                            <img src="http://img1.szdc666.com/pic137.png" alt="" />
                        </div>
                        <!-- 杨贵妃 -->
                        <div class="oney-a-choiceygf none">
                            <div class="oney-a-ygfpoetry text-center position-rel">
                                <i class="oney-a-poetryone position-abs"></i>
                                <i class="oney-a-poetrytwo position-abs"></i>
                                <i class="oney-a-poetrythree position-abs"></i>
                                <i class="oney-a-poetryfour position-abs"></i>
                                <span class="thirty three">云想衣裳花想容，<br />春风拂槛露华浓。<br />若非群玉山头见，<br />会向瑶台月下逢。</span>
                            </div>
                            <img src="http://img1.szdc666.com/pic138.png" alt="" />
                        </div>
                    </div>
                    <div class="oney-a-choicebut text-center">
                        <span class="oney-a-choiceclose">关闭</span>
                        <span class="oney-a-enroll">成为西施</span>
                    </div>
                </div>
            </div>
            <!-- 确认弹窗 -->
            <div class="oney-a-confirmbg position-fix none">
                <div class="oney-a-confirm">
                    <div class="oney-a-confirmcon text-center thirty-two">是否选择成为西施？</div>
                    <!-- 双按钮 -->
                    <div class="oney-a-doublebut">
                        <span class="oney-a-douclose">关闭</span>
                        <span class="oney-a-doubecome">确认</span>
                    </div>
                    <div class="oney-a-danbut none">
                        <span class="oney-a-danConfirm">确认</span>
                    </div>
                </div>
            </div>
            <!-- 渐隐弹窗 -->
            <div class="oney-a-fadealert text-center thirty white position-fix none"></div>
            <!-- 获取此用户id -->
            <div class="oney-a-userid none">49274491</div>
        </div>
        <script src="js/jquery-1.11.3.min.js" type="text/javascript"></script>
        <script src="js/index.js" type="text/javascript"></script>
        <script>
            var user_f_uuid = parseInt($(".oney-a-userid").html()); // 本用户房间号id
            var listTypes = 1; // 默认选择西施数据列表，即types = 1
            // 点击四大美女切换榜单
            $(".oney-a-peoitem").click(function (e) {
                $(this).addClass("oney-a-peoitemsel");
                $(this).siblings("div").removeClass("oney-a-peoitemsel");
                var selGirlIndex = $(this).index();
                listTypes = selGirlIndex + 1;
                requestData();
                if (selGirlIndex == 0) {
                    peoitemImgSrc(".oney-a-peoitem", 0, 'http://img1.szdc666.com/xssel.png');
                    peoitemImgSrc(".oney-a-peoitem", 1, 'http://img1.szdc666.com/wzj.png');
                    peoitemImgSrc(".oney-a-peoitem", 2, 'http://img1.szdc666.com/dc.png');
                    peoitemImgSrc(".oney-a-peoitem", 3, 'http://img1.szdc666.com/ygf.png');
                } else if (selGirlIndex == 1) {
                    peoitemImgSrc(".oney-a-peoitem", 0, 'http://img1.szdc666.com/xs.png');
                    peoitemImgSrc(".oney-a-peoitem", 1, 'http://img1.szdc666.com/wzjsel.png');
                    peoitemImgSrc(".oney-a-peoitem", 2, 'http://img1.szdc666.com/dc.png');
                    peoitemImgSrc(".oney-a-peoitem", 3, 'http://img1.szdc666.com/ygf.png');
                } else if (selGirlIndex == 2) {
                    peoitemImgSrc(".oney-a-peoitem", 0, 'http://img1.szdc666.com/xs.png');
                    peoitemImgSrc(".oney-a-peoitem", 1, 'http://img1.szdc666.com/wzj.png');
                    peoitemImgSrc(".oney-a-peoitem", 2, 'http://img1.szdc666.com/dcsel.png');
                    peoitemImgSrc(".oney-a-peoitem", 3, 'http://img1.szdc666.com/ygf.png');
                } else if (selGirlIndex == 3) {
                    peoitemImgSrc(".oney-a-peoitem", 0, 'http://img1.szdc666.com/xs.png');
                    peoitemImgSrc(".oney-a-peoitem", 1, 'http://img1.szdc666.com/wzj.png');
                    peoitemImgSrc(".oney-a-peoitem", 2, 'http://img1.szdc666.com/dc.png');
                    peoitemImgSrc(".oney-a-peoitem", 3, 'http://img1.szdc666.com/ygfsel.png');
                }
            })
            function peoitemImgSrc (peoitem, eqNum, imgSrc) {
                $(peoitem).children("img").eq(eqNum).attr({
                    "src": imgSrc
                });
            }

            // 点击报名
            $(".oney-a-bmbut").click(function () {
                $(".oney-a-choicebg").removeClass("none")
            })
            // 关闭弹窗
            function closeAlert (closeBut, alertBg, noneEve) {
                $(closeBut).click(function (e) {
                    $(alertBg).addClass(noneEve)
                })
            }
            closeAlert(".oney-a-choiceclose", ".oney-a-choicebg", "none");
            closeAlert(".oney-a-douclose", ".oney-a-confirmbg", "none");
            closeAlert(".oney-a-danConfirm", ".oney-a-confirmbg", "none");
            // 点击空白部分点击隐藏弹窗
            freeBlank(".oney-a-choicebg", ".oney-a-choiceale", "none");
            freeBlank(".oney-a-confirmbg", ".oney-a-confirm", "none");

            // 点击弹窗中的tap
            var enrollType = 1; // 主播报名类型，默认西施
            $(".oney-a-choicetit span").click(function (e) {
                $(this).addClass("oney-a-choicetitsel");
                $(this).siblings("span").removeClass("oney-a-choicetitsel");
                var selGirlIndex = $(this).index();
                $(".oney-a-choicecon").children("div").eq(selGirlIndex).removeClass("none");
                $(".oney-a-choicecon").children("div").eq(selGirlIndex).siblings("div").addClass("none");
                var selGirlName = $(this).html();
                $(".oney-a-enroll").html("成为" + selGirlName);
                if (selGirlIndex == 0) {
                    enrollType = 1;
                } else {
                    enrollType = selGirlIndex + 1;
                }
            });
            // 点击成为XX
            $(".oney-a-enroll").click(function (e) {
                $(".oney-a-choicebg").addClass("none");
                $(".oney-a-confirmbg").removeClass("none");
                var selGirlName = $(".oney-a-choicetitsel").html();
                $(".oney-a-confirmcon").html("是否选择成为" + selGirlName + "？");
                $(".oney-a-doublebut").removeClass("none");
                $(".oney-a-danbut").addClass("none");
            })

            var service = "http://10.0.0.167:8080/" // 数据请求域名
            
            requestData() // 数据列表请求
            function requestData (argument) {
                $.ajax({
                    url: service + 'anniversary/getanniversary',
                    type: 'POST',
                    dataType: 'json',
                    data: {
                        types: listTypes
                    },
                    success: function (data) {
                        console.log(data)
                        var sign = data.sign;
                        var uploadUrl = data.d.uploadUrl; // 图像域名
                        var listData = data.d.list;
                        if (sign == 0) {
                            $(".oney-a-fadealert").html("系统忙");
                            $(".oney-a-fadealert").fadeIn(300, function() {
                                $(".oney-a-fadealert").fadeOut(2800);
                            });
                            $(".oney-a-listshow").addClass("none");
                            $(".oney-a-emptydata").removeClass("none");
                        } else if (sign == 1) {
                            var anchorList = data.d.list; // 获取服务端给的数据
                            var listCon = ""; // 主播列表
                            var className = ["oney-a-sortone", "oney-a-sorttwo", "oney-a-sortthree"] // 前三的类名
                            if (anchorList.length == 0) {
                                $(".oney-a-listshow").addClass("none");
                                $(".oney-a-emptydata").removeClass("none");
                            } else {
                                $(".oney-a-listshow").removeClass("none");
                                $(".oney-a-emptydata").addClass("none");
                            }
                            for (var i = 0; i < anchorList.length; i++) {
                                if (i < 3) {
                                    listCon += '<li class="oney-a-item"><span class="oney-a-sort ' + className[i] + ' thirty"><i></i></span><div class="oney-a-anchor"><img class="oney-a-anchorpic" src="' + uploadUrl + listData[i].head + '" alt="" /><div class="oney-a-anchorinfo"><span class="block thirty three">' + listData[i].nickname + '</span><em class="block twenty-six">ID:' + listData[i].f_uuid + '</em></div></div><span class="oney-a-xgz thirty three">' + listData[i].starlight + '</span></li>'
                                } else {
                                    listCon += '<li class="oney-a-item"><span class="oney-a-sort thirty">' + (i + 1) + '</span><div class="oney-a-anchor"><img class="oney-a-anchorpic" src="' + uploadUrl + listData[i].head + '" alt="" /><div class="oney-a-anchorinfo"><span class="block thirty three">' + listData[i].nickname + '</span><em class="block twenty-six">ID:' + listData[i].f_uuid + '</em></div></div><span class="oney-a-xgz thirty three">' + listData[i].starlight + '</span></li>'
                                    
                                }
                            };
                            $(".oney-a-listcon").empty();
                            $(".oney-a-listcon").append(listCon);
                        }
                    }
                })
            }

            // 点击确认报名
            $(".oney-a-doublebut .oney-a-doubecome").click(function () {
                $.ajax({
                    url: service + 'anniversary/signup',
                    type: 'POST',
                    dataType: 'json',
                    data: {
                        f_uuid: user_f_uuid,
                        types: enrollType
                    },
                    success: function (data) {
                        console.log(data)
                        var sign = data.sign;
                        var requestCon = data.d.msg;
                        if (sign == 0) {
                            $(".oney-a-fadealert").html("系统忙");
                            $(".oney-a-fadealert").fadeIn(300, function() {
                                $(".oney-a-fadealert").fadeOut(2800);
                            });
                        } else if (sign == 1) {
                            $(".oney-a-confirmcon").html(requestCon);
                            $(".oney-a-doublebut").addClass("none");
                            $(".oney-a-danbut").removeClass("none");
                        }
                    }
                })
                
            })

            // 排行榜滚动
            topscroll("oney-a-listshow", "#oney-a-listshow", "#oney-a-listcon", 1, 50);
            function topscroll (idEve, outerlayer, inlayer, speed, intervaltime) {
                // 排行榜滚动
                var luckMain = document.getElementById(idEve);
                var luckSpeed = speed;
                var luckScroll = setInterval(function (){
                    if (luckMain.scrollTop + $(outerlayer).height() >= $(inlayer).height()) {
                        clearInterval(luckScroll);
                        setTimeout(function () {
                            luckMain.scrollTop += luckSpeed;
                            // 滚动到底部时重新滚动
                            luckMain.scrollTop = 0;
                            topscroll("oney-a-listshow", "#oney-a-listshow", "#oney-a-listcon", 1, 50);
                        }, 1500)
                    } else if(luckMain.scrollTop + $(outerlayer).height() < $(inlayer).height() && luckMain.scrollTop == 0) {
                        clearInterval(luckScroll);
                        setTimeout(function () {
                            luckMain.scrollTop += luckSpeed;
                            topscroll("oney-a-listshow", "#oney-a-listshow", "#oney-a-listcon", 1, 50);
                        }, 1500)
                    } else {
                        luckMain.scrollTop += luckSpeed;
                    }
                }, intervaltime);
            }

            // 奖励，规则tap切换
            $(".oney-a-taptit span").click(function () {
                $(this).addClass("oney-a-taptitact");
                $(this).siblings("span").removeClass("oney-a-taptitact");

                var nowIndex = $(this).index();
                $(".oney-a-showcom").children().eq(nowIndex).removeClass("none");
                $(".oney-a-showcom").children().eq(nowIndex).siblings().addClass("none");
            })
        </script>
    </body>
</html>