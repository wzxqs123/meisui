<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>七夕</title>
        <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
        <meta name="format-detection" content="telephone=no">
        <link rel="stylesheet" type="text/css" href="http://img1.szdc666.com/swiper.3.1.7.min.css">
        <link rel="stylesheet" type="text/css" href="http://img1.szdc666.com/activitys.css">
        <style type="text/css">
            html, body {
                width: 100%;
                background-color: #4b489d;
            }
            @font-face {
                font-family: "hwlb";
                src: url("font/hwlb/hwlb.eot"); /* IE9 */
                src: url("font/hwlb/hwlb.eot?#iefix") format("embedded-opentype"), /* IE6-IE8 */
                
                url("font/hwlb/hwlb.woff") format("woff"), /* chrome、firefox */
                url("font/hwlb/hwlb.ttf") format("truetype"), /* chrome、firefox、opera、Safari, Android, iOS 4.2+ */
                
                url("font/hwlb/hwlb.svg#hwlb") format("svg"); /* iOS 4.1- */
                font-style: normal;
                font-weight: normal;
            }
            .seventh-s-wrap .none {
                display: none;
            }
        </style>
    </head>
    <body>
        <div class="seventh-s-wrap position-rel">
            <!-- 规则 -->
            <div class="seventh-s-rule position-fix"></div>
            <div class="seventh-s-cj text-center">
                <div class="seventh-s-cjone seventh-s-cjbut weight-bold" data-type="0">
                    <p class="thirty text-center seventh-s-violet">送喜鹊x1</p>
                    <div class="seventh-s-cjmoney"><i></i><span class="white twenty-six">1111钻</span></div>
                </div>
                <div class="seventh-s-cjten seventh-s-cjbut weight-bold" data-type="1">
                    <p class="thirty text-center seventh-s-violet">送喜鹊x10</p>
                    <div class="seventh-s-cjmoney"><i></i><span class="white twenty-six">10000钻</span></div>
                </div>
            </div>
            <a href="sevens-record.html?t=273176f2da0a583b46f49f06ccf19a354747" class="seventh-s-record block text-center weight-bold seventh-s-violet">我的获奖记录</a>
            <div class="seventh-s-giftsec">
                <div class="seventh-s-gifttit weight-bold text-center">牛郎织女谢礼</div>
                <div class="seventh-s-giftcom">
                    <p class="text-center weight-bold thirty white">送喜鹊可获得以下谢礼</p>
                    <div class="swiper-container seventh-s-container">
                        <div class="swiper-wrapper">
                            <!-- <div class="swiper-slide seventh-s-slide">
                                <img class="block img" src="images/demoimages/pic139.png" alt="" />
                            </div> -->
                        </div>
                    </div>
                </div>
            </div>
            <div class="seventh-s-ranksec">
                <div class="seventh-s-gifttit weight-bold text-center">送喜鹊排名</div>
                <ul class="seventh-s-ranklist">
                    <!-- <li class="seventh-s-rankitem">
                        <span class="seventh-s-rankorder text-center white thirty weight-bold">1</span>
                        <div class="seventh-s-rankinfo">
                            <img class="block" src="images/demoimages/pic48.png" alt="" />
                            <span class="thirty white">我叫李依沙白</span>
                        </div>
                        <div class="seventh-s-ranknum">
                            <i class="seventh-s-bird"></i>
                            <span class="twenty-six white">100只</span>
                        </div>
                    </li> -->
                </ul>
            </div>
            <footer class="seventh-s-foot white text-center">更多详询客服 微信：livekefu&nbsp&nbsp&nbspQQ：965997888<br />本活动最终解释权归美岁直播所有</footer>
            <!-- 活动规则弹窗 -->
            <div class="seventh-s-ruleale position-fix none">
                <div class="seventh-s-ruledel position-rel">
                    <!-- 关闭按钮 -->
                    <span class="seventh-s-close position-abs">
                        <i class="position-abs"></i>
                        <i class="position-abs"></i>
                    </span>
                    <h2 class="seventh-s-ruletit white text-center">活动规则</h2>
                    <ul class="seventh-s-rulelist white twenty-six">
                        <li>1.活动期间，在活动页面点击送喜鹊即可获得   牛郎织女的谢礼</li>
                        <li>2.每1111钻赠送一只喜鹊，10000钻可一次赠送10个喜鹊</li>
                        <li>3.牛郎织女的谢礼包括实体奖励、钻石、直播间礼物</li>
                        <li>4.赠送喜鹊最多的前三名用户可获得额外奖励（奖励：守护、88888钻）</li>
                    </ul>
                </div>
            </div>
            <!-- 中奖弹窗 -->
            <div class="seventh-s-zjale position-fix none">
                <div class="seventh-s-zjdel position-rel">
                    <!-- 关闭按钮 -->
                    <span class="seventh-s-close position-abs">
                        <i class="position-abs"></i>
                        <i class="position-abs"></i>
                    </span>
                    <h2 class="seventh-s-zjtit white text-center">恭喜中奖</h2>
                    <p class="white thirty text-center">您已获得以下牛郎织女谢礼：</p>
                    <ul class="seventh-s-prizelist white twenty-six">
                        <!-- <li class="seventh-s-prizeitem">华为P30 Pro</li> -->
                    </ul>
                    <p class="seventh-s-zjtips white text-center twenty-six">实体礼物请在“我的获奖记录”中填写收货信息<br />直播礼物请在“直播间-我的礼物箱”查看使用</p>
                    <a href="sevens-record.html?t=273176f2da0a583b46f49f06ccf19a354747" class="seventh-s-mynotes block seventh-s-violet text-center weight-bold">我的获奖记录</a>
                </div>
            </div>
            <!-- 确认提示弹窗 -->
            <div class="seventh-s-qrale position-fix none">
                <div class="seventh-s-qr">
                    <div class="seventh-s-qrcon white twenty-six text-center"></div>
                    <div class="seventh-s-excbut text-center weight-bold none">
                        <em class="seventh-s-excno white">取消</em>
                        <span class="seventh-s-excyes seventh-s-violet">兑换</span>
                    </div>
                    <div class="seventh-s-tiptrue text-center weight-bold none">
                        <span class="seventh-s-confirm seventh-s-violet">确认</span>
                    </div>
                </div>
            </div>
            <!-- 渐隐弹窗 -->
            <div class="seventh-s-fadealert text-center thirty white position-fix none"></div>
        </div>
        <script src="http://img1.szdc666.com/jquery-1.11.3.min.js" type="text/javascript"></script>
        <script src="http://img1.szdc666.com/swiper.3.1.7.jquery.min.js" type="text/javascript"></script>
        <script src="http://img1.szdc666.com/index.js" type="text/javascript"></script>
        <script>
            var serverUrl = "http://192.168.2.14:8083/qixi";

            // 谢礼列表
            var swiperSlideCon = "";
            var swiperSlideList = ["pic139.png", "pic140.png", "pic141.png", "pic142.png", "pic143.png", "pic144.png", "pic145.png", "pic146.png", "pic147.png", "pic148.png", "pic149.png", "pic150.png"]; // 谢礼图片列表
            for (var i = 0; i < swiperSlideList.length; i++) {
                swiperSlideCon += '<div class="swiper-slide seventh-s-slide"><img class="block img" src="http://img1.szdc666.com/' + swiperSlideList[i] + '" alt="" /></div>'
            };
            $(".swiper-wrapper").empty("");
            $(".swiper-wrapper").append(swiperSlideCon);
            var mySwiper = new Swiper ('.swiper-container', {
                direction: 'horizontal',
                loop: false,
                freeMode : true,
                slidesPerView : "auto"
            })

            // 点击规则按钮
            $(".seventh-s-rule").click(function () {
                $(".seventh-s-ruleale").removeClass("none");
                //lockscroll() // 锁定滚动条
            })
            // 关闭弹窗
            function closeAlert (closeBut, alertPage, noneEve) {
                $(closeBut).click(function (e) {
                    $(alertPage).addClass(noneEve);
                    //relievescroll; // 解除锁定
                })
            }
            closeAlert(".seventh-s-close", ".seventh-s-ruleale", "none");
            closeAlert(".seventh-s-close", ".seventh-s-zjale", "none");
            closeAlert(".seventh-s-excno", ".seventh-s-qrale", "none");
            closeAlert(".seventh-s-confirm", ".seventh-s-qrale", "none");
            // 点击空白部分隐藏内容
            freeBlank(".seventh-s-ruleale", ".seventh-s-ruledel", "none");
            freeBlank(".seventh-s-qrale", ".seventh-s-qr", "none");
            freeBlank(".seventh-s-zjale", ".seventh-s-zjdel", "none");

            // 获取送喜鹊排名列表
            $.ajax({
                url: serverUrl + "/getLotteryCount",
                type: 'POST',
                dataType: 'json',
                success: function (data) {
                    console.log(data);
                    var sign = data.sign;
                    if (sign == 1) {
                        var uploadUrl = data.d.uploadUrl;
                        var userList = data.d.list;
                        var listCon = "";
                        for (var i = 0; i < userList.length; i++) {
                            listCon += '<li class="seventh-s-rankitem"><span class="seventh-s-rankorder text-center white thirty weight-bold">' + (i + 1) + '</span><div class="seventh-s-rankinfo"><img class="block" src="' + uploadUrl + userList[i].head + '" alt="" /><span class="thirty white">' + userList[i].nickname + '</span></div><div class="seventh-s-ranknum"><i class="seventh-s-bird"></i><span class="twenty-six white">' + userList[i].count + '只</span></div></li>'
                        };
                        $(".seventh-s-ranklist").empty(""); // 清空奖品列表
                        $(".seventh-s-ranklist").append(listCon);
                    } else if(sign == 0) {
                        $(".seventh-s-fadealert").html("系统忙");
                        $(".seventh-s-fadealert").fadeIn(300, function() {
                            $(".seventh-s-fadealert").fadeOut(2800);
                        });
                        $(".seventh-s-zjale").addClass("none");
                        $(".seventh-s-qrale").removeClass("none");
                    }
                }
            })


            var thisType = null; // 抽奖的类型，0：单抽，1：十连抽
            $(".seventh-s-cjbut").click(function (e) {
                thisType = $(this).attr("data-type"); // 0：单抽，1：十连抽
                if (thisType == "0") {
                    $(".seventh-s-qrcon").html("是否确认使用钻石换取1只喜鹊？<br />1111=1只喜鹊");
                } else if(thisType == "1") {
                    $(".seventh-s-qrcon").html("是否确认使用钻石换取10只喜鹊？<br />10000=10只喜鹊");
                }
                $(".seventh-s-excbut").removeClass("none"); // 兑换，取消按钮模块显示
                $(".seventh-s-tiptrue").addClass("none"); // 确认按钮模块隐藏
                $(".seventh-s-qrale").removeClass("none"); // 确认提示弹窗
            });
            $(".seventh-s-excyes").click(function (e) {
                $.ajax({
                    url: serverUrl + "/lottery",
                    type: 'POST',
                    dataType: 'json',
                    data: {
                        t: "273176f2da0a583b46f49f06ccf19a354747",
                        type: thisType
                    },
                    success: function (data) {
                        console.log(data)
                        var sign = data.sign;
                        var returnData = data.d.status;
                        if (sign == 1) {
                            if (returnData == 0) {
                                $(".seventh-s-qrale").addClass("none");
                                $(".seventh-s-zjale").removeClass("none");
                                var prizeList = data.d.list;
                                var listCon = "";
                                for (var i = 0; i < prizeList.length; i++) {
                                    listCon += '<li class="seventh-s-prizeitem text-center">' + prizeList[i] + '</li>'
                                };
                                $(".seventh-s-prizelist").empty(""); // 清空奖品列表
                                $(".seventh-s-prizelist").append(listCon);
                            } else {
                                $(".seventh-s-excbut").addClass("none");
                                $(".seventh-s-tiptrue").removeClass("none");
                                if(returnData == 1) {
                                    $(".seventh-s-qrcon").html("对不起！<br />您的钻石余额不足，请充值！")
                                } else if (returnData == 2) {
                                    $(".seventh-s-qrcon").html("对不起，您无抽奖资格！")
                                }
                            }
                        } else if(sign == 0) {
                            $(".seventh-s-fadealert").html("系统忙");
                            $(".seventh-s-fadealert").fadeIn(300, function() {
                                $(".seventh-s-fadealert").fadeOut(2800);
                            });
                            $(".seventh-s-zjale").addClass("none");
                            $(".seventh-s-qrale").removeClass("none");
                        }
                    }
                })
            })
        </script>
    </body>
</html>