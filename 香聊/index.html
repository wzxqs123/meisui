<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>首页</title>
        <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
        <meta name="format-detection" content="telephone=no">
        <link rel="stylesheet" type="text/css" href="css/swiper.3.1.7.min.css" />
        <link rel="stylesheet" type="text/css" href="css/index.css">
        <style type="text/css">
            html, body {
                background: #f9f4f5;
            }
            .pic-l-layerbg {
                z-index: 100;
                overflow: auto;
                position: fixed;
                bottom: 0;
                left: 0;
                width: 100%;
                height: 32.39rem;
            }
        </style>
    </head>
    <body>
        <div class="index-l-wrap">
            <!-- 标题部分 -->
            <div class="pubtit bg-white clearfix">
                <h2 class="text-center thirty-two">首页</h2>
            </div>
            <div class="swi-container index-banner">
                <div class="swiper-wrapper clearfix">
                    <a href="" class="swiper-slide block img">
                        <img src="images/demoimages/pic10.png" alt="" class="block img">
                    </a>
                    <a href="" class="swiper-slide block img">
                        <img src="images/demoimages/pic10.png" alt="" class="block img">
                    </a>
                </div>
                <!-- 如果需要分页器 -->
                <div class="swiper-pagination"></div>
            </div>
            <div class="index-hot bg-white twenty-six clearfix">
                <div class="index-hotleft left clearfix">
                    <i class="index-hotzan left"></i>
                    <em class="index-pink left">热门推荐</em>
                </div>
                <span class="index-hotright b-four right">右滑更多</span>
            </div>
            <div class="index-nav swiper-container twenty-six bg-white">
                <div class="swiper-wrapper clearfix">
                    <a href="" class="swiper-slide index-navitem left three clearfix">
                        <img src="images/demoimages/pic11.png" alt="" class="block">
                        <span class="block text-center">奶牛</span>
                    </a>
                    <a href="" class="swiper-slide index-navitem left three clearfix">
                        <img src="images/demoimages/pic11.png" alt="" class="block">
                        <span class="block text-center">奶牛</span>
                    </a>
                </div>
            </div>
            <div class="swiper-containers index-mfpic">
                <div class="swiper-wrapper clearfix">
                    <div class="swiper-slide index-mfcon left">
                        <div class="index-limit index-pink text-center twenty-six">限时免费</div>
                        <a href="" class="block img">
                            <img src="images/demoimages/pic12.png" alt="" class="block img" />
                        </a>
                    </div>
                    <div class="swiper-slide index-mfcon left">
                        <div class="index-limit index-pink text-center twenty-six">限时免费</div>
                        <a href="" class="block img">
                            <img src="images/demoimages/pic12.png" alt="" class="block img" />
                        </a>
                    </div>
                    <div class="swiper-slide index-mfcon left">
                        <div class="index-limit index-pink text-center twenty-six">限时免费</div>
                        <a href="" class="block img">
                            <img src="images/demoimages/pic12.png" alt="" class="block img" />
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- 列表内容 -->
            <div id="pic-l-layerbg" class="pic-l-layerbg bg-white">
                <!-- 最新修改-2018-4-11 -->
                <div id="pic-l-list" class="pic-l-list position-rel clearfix">
                    <!-- 子项1 -->
                    <a href="" class="pic-l-item left position-rel">
                        <span class="index-label position-abs"></span>
                        <img src="images/demoimages/5.jpg" alt="" class="pic-l-pics block img">
                        <span class="pic-l-perinfo clearfix white position-abs">
                            <img src="images/demoimages/pic1.png" alt="" class="left">
                            <span class="left">奶牛个巴子</span>
                            <em class="right">10分钟前</em>
                        </span>
                    </a>
                    <a href="" class="pic-l-item left position-rel">
                        <img src="images/demoimages/5.jpg" alt="" class="pic-l-pics block img">
                        <span class="pic-l-perinfo clearfix white position-abs">
                            <img src="images/demoimages/pic1.png" alt="" class="left">
                            <span class="left">奶牛个巴子</span>
                            <em class="right">10分钟前</em>
                        </span>
                    </a>
                    <a href="" class="pic-l-item left position-rel">
                        <img src="images/demoimages/5.jpg" alt="" class="pic-l-pics block img">
                        <span class="pic-l-perinfo clearfix white position-abs">
                            <img src="images/demoimages/pic1.png" alt="" class="left">
                            <span class="left">奶牛个巴子</span>
                            <em class="right">10分钟前</em>
                        </span>
                    </a>
                    <a href="" class="pic-l-item left position-rel">
                        <img src="images/demoimages/5.jpg" alt="" class="pic-l-pics block img">
                        <span class="pic-l-perinfo clearfix white position-abs">
                            <img src="images/demoimages/pic1.png" alt="" class="left">
                            <span class="left">奶牛个巴子</span>
                            <em class="right">10分钟前</em>
                        </span>
                    </a>
                    <a href="" class="pic-l-item left position-rel">
                        <img src="images/demoimages/5.jpg" alt="" class="pic-l-pics block img">
                        <span class="pic-l-perinfo clearfix white position-abs">
                            <img src="images/demoimages/pic1.png" alt="" class="left">
                            <span class="left">奶牛个巴子</span>
                            <em class="right">10分钟前</em>
                        </span>
                    </a>
                    <a href="" class="pic-l-item left position-rel">
                        <img src="images/demoimages/5.jpg" alt="" class="pic-l-pics block img">
                        <span class="pic-l-perinfo clearfix white position-abs">
                            <img src="images/demoimages/pic1.png" alt="" class="left">
                            <span class="left">奶牛个巴子</span>
                            <em class="right">10分钟前</em>
                        </span>
                    </a>
                    <!-- 子项2 -->
                    <!-- <a href="" class="pic-l-itemtwo block">
                        <a href="" class="pic-l-pictwo block">
                            <img src="images/demoimages/pic2.png" data-echo="images/demoimages/pic8.png" alt="" class="block img">
                        </a>
                        <a href="" class="pic-l-twoinfo clearfix three bg-white block">
                            <img src="images/demoimages/pic1.png" alt="" class="left">
                            <span class="twenty-six left">奶牛个巴子</span>
                            <em class="twenty-six right">10分钟前</em>
                        </a>
                    </a> -->
                </div>
                <!-- 最新修改-2018-4-11 -->
                <div id="page" class="text-center none">没有新数据了</div>
                <div class="loading"></div>
            </div>
            <div id="navigation"><a href="page.html?page=1"></a></div>

            <!-- 导航 -->
            <div class="nav bg-white clearfix position-fix">
                <a href="" class="index-sel left"></a>
                <a href="" class="pic-nosel left"></a>
                <a href="" class="video-nosel left"></a>
                <a href="" class="my-nosel left"></a>
            </div>
        </div>
        <script src="js/jquery-1.11.3.min.js" type="text/javascript"></script>
        <script src="js/index.js" type="text/javascript"></script>
        <script src="js/swiper.3.1.7.jquery.min.js" type="text/javascript"></script>
        <!-- 瀑布流 -->
        <script src="js/masonry.pkgd.min.js" type="text/javascript"></script>
        <!-- 下拉刷新 -->
        <!-- <script src="js/dropload.min.js" type="text/javascript"></script> -->
        <script src="js/jquery.infinitescroll.min.js" type="text/javascript"></script>
        <script src="js/imagesloaded.pkgd.min.js" type="text/javascript"></script>
        <script>
            // 首页顶部banner滚动
            var mySwi = new Swiper ('.swi-container', {
                direction: 'horizontal',
                loop: true,
                autoplay: 5000,
                autoplayDisableOnInteraction : false,
                autoHeight: true, //高度随内容变化
                freeMode : false,
                slidesPerView : "auto",
                // 如果需要分页器
                pagination: '.swiper-pagination'
            })

            // 热门推荐滑动
            var mySwipers = new Swiper ('.swiper-container', {
                direction: 'horizontal',
                loop: false,
                freeMode : true,
                slidesPerView : "auto"
            })

            var artDlist = parseInt($(".index-mfcon").size() / 2);
            var swiperContainers = new Swiper ('.swiper-containers', {
                direction: 'horizontal',
                loop: true,
                // autoplay: 5000,
                autoplayDisableOnInteraction : false,
                initialSlide : artDlist,
                centeredSlides : true,
                freeMode : false,
                slidesPerView : "auto"
            })


            // 瀑布流
            var $grid = $('#pic-l-list').masonry({  
                itemSelector: '.pic-l-item',  
                isAnimated: true,
                isResizableL: false,
                gutterWidth: 0
            });
            $grid.imagesLoaded().progress( function() {
                $grid.masonry('layout');
            });

            // 最新修改-2018-4-11
            /*$.ajax({
                url: '',
                type: 'POST',
                dataType: json,
                success: function (datas) {
                    var totalPage = datas;
                }
            })*/
            
            // 最新修改-2018-4-11
            var sp = 1;
            $('#pic-l-list').infinitescroll({
                navSelector: "#navigation", //导航的选择器，会被隐藏
                nextSelector: "#navigation a", //包含下一页链接的选择器
                itemSelector: ".pic-l-item", //你将要取回的选项(内容块)
                debug: true, //启用调试信息
                animate: true, //当有新数据加载进来的时候，页面是否有动画效果，默认没有
                // maxPage: 3, 
                extraScrollPx: 150, //滚动条距离底部多少像素的时候开始加载，默认150
                bufferPx: 40, //载入信息的显示时间，时间越大，载入信息显示时间越短
                errorCallback: function() {
                    // alert('error');
                    $("#navigation").remove();
                    $("#infscr-loading").hide();
                    $("#page").show();
                    $(window).unbind('.infscr');
                }, //当出错的时候，比如404页面的时候执行的函数
                localMode: true, //是否允许载入具有相同函数的页面，默认为false
                dataType: 'html',//可以是json
                /*template: function(data) {
                   //data表示服务端返回的json格式数据，这里需要把data转换成瀑布流块的html格式，然后返回给回到函数
                   console.log(data)
                   // $("#navigation a").attr({
                   //     "href": 'http://192.168.2.18:8083/lottery/mains?page=2'
                   // });
                   return '<a href="" class="pic-l-item left position-rel"><img src="images/demoimages/5.jpg" alt="" class="pic-l-pics block img"><span class="pic-l-perinfo clearfix white position-abs"><img src="images/demoimages/pic1.png" alt="" class="left"><span class="left">奶牛个巴子</span><em class="right">10分钟前</em></span></a><a href="" class="pic-l-item left position-rel"><img src="images/demoimages/5.jpg" alt="" class="pic-l-pics block img"><span class="pic-l-perinfo clearfix white position-abs"><img src="images/demoimages/pic1.png" alt="" class="left"><span class="left">奶牛个巴子</span><em class="right">10分钟前</em></span></a><a href="" class="pic-l-item left position-rel"><img src="images/demoimages/5.jpg" alt="" class="pic-l-pics block img"><span class="pic-l-perinfo clearfix white position-abs"><img src="images/demoimages/pic1.png" alt="" class="left"><span class="left">奶牛个巴子</span><em class="right">10分钟前</em></span></a><a href="" class="pic-l-item left position-rel"><img src="images/demoimages/5.jpg" alt="" class="pic-l-pics block img"><span class="pic-l-perinfo clearfix white position-abs"><img src="images/demoimages/pic1.png" alt="" class="left"><span class="left">奶牛个巴子</span><em class="right">10分钟前</em></span></a><a href="" class="pic-l-item left position-rel"><img src="images/demoimages/5.jpg" alt="" class="pic-l-pics block img"><span class="pic-l-perinfo clearfix white position-abs"><img src="images/demoimages/pic1.png" alt="" class="left"><span class="left">奶牛个巴子</span><em class="right">10分钟前</em></span></a><a href="" class="pic-l-item left position-rel"><img src="images/demoimages/5.jpg" alt="" class="pic-l-pics block img"><span class="pic-l-perinfo clearfix white position-abs"><img src="images/demoimages/pic1.png" alt="" class="left"><span class="left">奶牛个巴子</span><em class="right">10分钟前</em></span></a>';
                },*/
                loading: {
                    selector: '.loading', // 显示loading信息的div
                    msgText: "加载中...",
                    finishedMsg: '没有新数据了...',
                    // 最新修改-2018-4-11
                    finished: function () {
                        sp++;
                        console.log(sp)
                        // 此处的8只是举例说明，此处因为服务端给的最大页数
                        if (sp >= 8) {
                            $("#navigation").remove();
                            $("#infscr-loading").hide();
                            $("#page").show();
                            $(window).unbind('.infscr');
                        }
                    },errorCallback: function() {
                        console.log("errorCallback")
                        $("#page").show();
                    }
                }
            }, function(newElems) {
                //程序执行完的回调函数
                console.log("进来了")
                var $newElems = $(newElems);
                $('#pic-l-list').masonry('appended', $newElems);
                $grid.imagesLoaded().progress( function() {
                    $grid.masonry('layout');
                });
            });
        
        </script>
    </body>
</html>